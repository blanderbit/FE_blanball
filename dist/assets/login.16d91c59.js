import{u as P,b as y,d as i,_ as $,A as L,T as V,R as m,r as d,o as f,c as A,a as c,w as k,e as t,t as a,f as N,g as O,p as B,h as M,i as G}from"./index.30b1903a.js";import{G as U}from"./GreenBtn.b4db9211.js";import{I as x,F,e as q,a as D}from"./InputComponent.e5fcfc55.js";import{C as z}from"./Checkbox.e6cf33f6.js";import{c as H,a as R,b as W}from"./object.7abb4f5a.js";import{A as j}from"./AuthenticationMain.21b6789a.js";import{i as J,a as K}from"./registration-back-1.d065119e.js";import{C as Q}from"./index.b54805f3.js";import"./v4.5d18198f.js";import"./profile.1ac31e7e.js";import"./male-icon.1c76ddde.js";const X="/assets/warning-black.c3dac141.svg";const Y={name:"Step1",components:{GreenBtn:U,InputComponent:x,Form:F,Checkbox:z},setup(){const e=P(),s=y(!1),r=i(()=>s.value),o=i(()=>({top:r.value?"20px":"-50px"})),g=i(()=>q),h=i(()=>D),l=y({email:localStorage.getItem("email"),password:localStorage.getItem("password")}),p=H({email:R().email().required(),save_credentials:W(),password:R().required().min(8)});return{eyeCrossed:g,eyeOpened:h,schema:p,initialValues:l,showInvalidCredentials:r,warningTopStyle:o,handleLogin:async n=>{var I;const{valid:E}=await n.validate();if(!E)return!1;try{const S=await L.AuthorizationService.login(n.controlledValues);V.setToken(S.data.tokens.access),n.values.save_credentials&&(localStorage.setItem("password",n.controlledValues.password),localStorage.setItem("email",n.controlledValues.email));const u=e.currentRoute.value.query.redirectUrl;if(u){const v=e.resolve(u);return!u||((I=v==null?void 0:v.matched)==null?void 0:I.find(b=>{var T;return(T=b==null?void 0:b.path)==null?void 0:T.includes("pathMatch")}))?e.push(m.APPLICATION.EVENTS.absolute):e.push(u)}await e.push(m.APPLICATION.EVENTS.absolute)}catch{s.value=!0}},openResetPasswordModal:()=>e.push(m.AUTHENTICATIONS.RESET.absolute),openRegisterPage:()=>e.push(m.AUTHENTICATIONS.REGISTER.absolute)}}},Z=e=>(B("data-v-5daca6df"),e=e(),M(),e),ee={class:"b-login-step"},te={class:"b-login-step__top-part"},oe={class:"b-login-step__main-title"},se={class:"b-login-step__title"},ne={class:"b-login-step__input"},ae={class:"b-login-step__input"},ie={class:"b-login-step__remember-me"},re={class:"b-login-step__check-block"},le={key:0,class:"b-login-step__wrong-credentials-message d-flex align-items-center"},ce=Z(()=>t("img",{src:X,alt:""},null,-1)),de={class:"b-login-step__buttons"},pe={class:"b-login-step__has-no-account"};function _e(e,s,r,o,g,h){const l=d("InputComponent"),p=d("checkbox"),w=d("GreenBtn"),C=d("Form");return f(),A("div",ee,[c(C,{"validation-schema":o.schema,"initial-values":o.initialValues},{default:k(_=>[t("div",te,[t("div",oe,a(e.$t("login.app-name")),1),t("div",se,a(e.$t("login.authorization")),1),t("div",ne,[c(l,{"outside-title":!0,title:"\u041B\u043E\u0433\u0456\u043D",placeholder:"elektron@mail.com","title-width":0,height:40,name:"email"},null,8,["placeholder"])]),t("div",ae,[c(l,{title:"\u041F\u0430\u0440\u043E\u043B\u044C","title-width":0,type:"password","outside-title":!0,placeholder:"********",name:"password",height:40})]),t("div",{class:"b-login-step__forgot-password",onClick:s[0]||(s[0]=n=>o.openResetPasswordModal())},[t("span",null,a(e.$t("login.forgot-password")),1)]),t("div",ie,[t("div",re,[c(p,{checked:_.values.save_credentials,"onUpdate:checked":n=>_.values.save_credentials=n},{label:k(()=>[t("span",null,a(e.$t("login.remember-login")),1)]),_:2},1032,["checked","onUpdate:checked"])]),t("div",{class:"b-login-step__forgot-password-mob",onClick:s[1]||(s[1]=n=>o.openResetPasswordModal())},a(e.$t("login.forgot-password")),1)])]),o.showInvalidCredentials?(f(),A("div",le,[ce,N(" "+a(e.$t("login.wrong-credentials")),1)])):O("",!0),t("div",de,[c(w,{onClickFunction:n=>o.handleLogin(_),text:"\u0423\u0432\u0456\u0439\u0442\u0438 \u0432 \u0430\u043A\u0430\u0443\u043D\u0442",height:40},null,8,["onClickFunction"])])]),_:1},8,["validation-schema","initial-values"]),t("div",pe,[N(a(e.$t("login.no-account"))+" ",1),t("span",{onClick:s[2]||(s[2]=_=>o.openRegisterPage())},a(e.$t("login.register")),1)])])}const ue=$(Y,[["render",_e],["__scopeId","data-v-5daca6df"]]),me={name:"login",components:{LoginComponent:ue,AuthenticationMain:j},setup(){const e=i(()=>({LOGIN:Q.register.authBlockTypes.login})),s=i(()=>J),r=i(()=>({"--back-picture":`url(${K})`}));return{mockData:e,backgroundTab:s,rightSideStyle:r}}};function ge(e,s,r,o,g,h){const l=d("LoginComponent"),p=d("AuthenticationMain");return f(),G(p,{"block-type":o.mockData.LOGIN,backgroundTab:o.backgroundTab,"right-side-style":o.rightSideStyle},{"main-content":k(()=>[c(l)]),_:1},8,["block-type","backgroundTab","right-side-style"])}const Ae=$(me,[["render",ge]]);export{Ae as default};
