import{u as P,b as V,d as A,e as a,_ as E,A as B,T as M,R as g,r as c,o as w,c as N,a as r,w as C,f as o,t as n,g as R,h as O,p as x,i as G,j as U,C as F}from"./index.a87692b6.js";import{G as q}from"./GreenBtn.8a2bdb09.js";import{I as D,F as z}from"./InputComponent.8565bb3f.js";import{C as H}from"./Checkbox.093b1817.js";import{c as W,a as $,b as j}from"./object.0e8161d1.js";import{_ as J}from"./warning-red.7e7f7092.js";import{A as K}from"./AuthenticationMain.5ecade2c.js";import{i as Q,a as X}from"./registration-back-1.77eb38c9.js";import"./v4.5d18198f.js";import"./PositionMap.8984c795.js";const Y={name:"LoginComponent",components:{GreenBtn:q,InputComponent:D,Form:z,Checkbox:H},setup(){const e=P(),{t:s}=V(),i=A(!1),t=a(()=>i.value),h=a(()=>({top:t.value?"20px":"-50px"})),v=A({}),l=a(()=>s("login.check-email")),d=a(()=>s("login.email-must-be")),b=a(()=>s("login.password-error"));return{schema:W({email:$().email(l).required(d),save_credentials:j(),password:$().required().min(8,b)}),initialValues:v,showInvalidCredentials:t,warningTopStyle:h,handleLogin:async _=>{var I;const{valid:L}=await _.validate();if(!L)return!1;try{const S=await B.AuthorizationService.login(_.controlledValues);M.setToken(S.data.tokens.access),_.values.save_credentials&&(localStorage.setItem("password",_.controlledValues.password),localStorage.setItem("email",_.controlledValues.email));const m=e.currentRoute.value.query.redirectUrl;if(m){const k=e.resolve(m);return!m||((I=k==null?void 0:k.matched)==null?void 0:I.find(f=>{var y;return(y=f==null?void 0:f.path)==null?void 0:y.includes("pathMatch")}))?e.push(g.APPLICATION.EVENTS.absolute):e.push(m)}await e.push(g.APPLICATION.EVENTS.absolute)}catch{i.value=!0}},openResetPasswordModal:()=>e.push(g.AUTHENTICATIONS.RESET.absolute),openRegisterPage:()=>e.push(g.AUTHENTICATIONS.REGISTER.absolute)}}},Z=e=>(x("data-v-161875c4"),e=e(),G(),e),ee={class:"b-login-step"},oe={class:"b-login-step__top-part"},te={class:"b-login-step__main-title"},se={class:"b-login-step__title"},ne={class:"b-login-step__input"},ae={class:"b-login-step__input"},ie={class:"b-login-step__remember-me"},le={class:"b-login-step__check-block"},re={key:0,class:"b-login-step__wrong-credentials-message d-flex align-baseline"},ce=Z(()=>o("img",{src:J,class:"m-2",alt:""},null,-1)),de={class:"b-login-step__buttons"},pe={class:"b-login-step__has-no-account"};function ue(e,s,i,t,h,v){const l=c("InputComponent"),d=c("checkbox"),b=c("GreenBtn"),T=c("Form");return w(),N("div",ee,[r(T,{"validation-schema":t.schema,"initial-values":t.initialValues},{default:C(p=>[o("div",oe,[o("div",te,n(e.$t("login.app-name")),1),o("div",se,n(e.$t("login.authorization")),1),o("div",ne,[r(l,{"outside-title":!0,title:"\u041B\u043E\u0433\u0456\u043D",placeholder:"example@email.com","title-width":0,height:40,name:"email"},null,8,["placeholder"])]),o("div",ae,[r(l,{title:"\u041F\u0430\u0440\u043E\u043B\u044C","title-width":0,"outside-title":!0,placeholder:"********","has-icon":!0,type:"password",name:"password",height:40})]),o("div",{class:"b-login-step__forgot-password",onClick:s[0]||(s[0]=u=>t.openResetPasswordModal())},[o("span",null,n(e.$t("login.forgot-password")),1)]),o("div",ie,[o("div",le,[r(d,{checked:p.values.save_credentials,"onUpdate:checked":u=>p.values.save_credentials=u},{label:C(()=>[o("span",null,n(e.$t("login.remember-me")),1)]),_:2},1032,["checked","onUpdate:checked"])]),o("div",{class:"b-login-step__forgot-password-mob",onClick:s[1]||(s[1]=u=>t.openResetPasswordModal())},n(e.$t("login.forgot-password")),1)])]),t.showInvalidCredentials?(w(),N("div",re,[ce,R(" "+n(e.$t("login.wrong-credentials")),1)])):O("",!0),o("div",de,[r(b,{onClickFunction:u=>t.handleLogin(p),text:"\u0423\u0432\u0456\u0439\u0442\u0438 \u0432 \u0430\u043A\u0430\u0443\u043D\u0442",height:40},null,8,["onClickFunction"])])]),_:1},8,["validation-schema","initial-values"]),o("div",pe,[R(n(e.$t("login.no-account"))+" ",1),o("span",{onClick:s[2]||(s[2]=p=>t.openRegisterPage())},n(e.$t("login.register")),1)])])}const _e=E(Y,[["render",ue],["__scopeId","data-v-161875c4"]]),me={name:"login",components:{LoginComponent:_e,AuthenticationMain:K},setup(){const e=a(()=>({LOGIN:F.register.authBlockTypes.login})),s=a(()=>Q),i=a(()=>({"--back-picture":`url(${X})`}));return{mockData:e,backgroundTab:s,rightSideStyle:i}}};function ge(e,s,i,t,h,v){const l=c("LoginComponent"),d=c("AuthenticationMain");return w(),U(d,{"block-type":t.mockData.LOGIN,backgroundTab:t.backgroundTab,"right-side-style":t.rightSideStyle},{"main-content":C(()=>[r(l)]),_:1},8,["block-type","backgroundTab","right-side-style"])}const Ae=E(me,[["render",ge]]);export{Ae as default};
