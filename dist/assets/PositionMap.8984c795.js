import{_ as T,d as f,U as y,x as C,k as b,o as h,c as k,A as v}from"./index.a87692b6.js";var w=[{elementType:"geometry",stylers:[{color:"#1d2c4d"}]},{elementType:"labels.text.fill",stylers:[{color:"#8ec3b9"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1a3646"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#ff0b0f"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#64779e"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#334e87"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#023e58"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#283d6a"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#6f9ba5"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#023e58"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#3C7680"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#304a7d"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#2c6675"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#255763"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b0d5ce"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#023e58"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#283d6a"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#3a4762"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#4e6d70"}]}],x={fillColor:"white",strokeWeight:2,strokeColor:"#448CCB",fillOpacity:1};const g={Ukraine:{east:40.2275801,north:52.3791473,south:44.184598,west:22.137059}},P=t=>({lat:(t.north-t.south)/2+t.south,lng:(t.east-t.west)/2+t.west}),_={name:"PositionMap",props:{coords:{type:Object},disableChangeCoords:{type:Boolean,default:!1}},setup(t,{emit:a}){const r=f({centerOfCountry:P(g.Ukraine),userCenter:{}}),i=f({});let s;function p(e,o){return new google.maps.Marker({position:o,map:e})}const d=async e=>{var o,l;a("update:coords:loading"),y.emit("update:coords:loading");try{const n={lat:e==null?void 0:e.lat,lng:e==null?void 0:e.lng,place:(l=(o=await v.LocationService.GetPlaceByCoords(e||r.value.centerOfCountry))==null?void 0:o.data)==null?void 0:l.data};a("update:coords",n),y.emit("update:coords",n)}catch{a("update:coords-error"),y.emit("update:coords-error")}a("map-loaded"),y.emit("map-loaded")};y.on("update:map:by:coords",e=>{var l,n,u,m;i.value.setPosition({lat:+((l=e.data.coordinates)==null?void 0:l.lat),lng:+((n=e.data.coordinates)==null?void 0:n.lon)});const o=new google.maps.LatLng(+((u=e.data.coordinates)==null?void 0:u.lat),+((m=e.data.coordinates)==null?void 0:m.lon));s.setCenter(o)});const c=async e=>{r.userCenter=e?{lat:e.lat,lng:e.lng}:r.value.centerOfCountry,s=new google.maps.Map(document.getElementById("map"),{center:r.userCenter,zoom:12,overviewMapControlOptions:{opened:!1},restriction:{latLngBounds:g.Ukraine,strictBounds:!0},styles:w,panControl:!1,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,rotateControl:!1}),s.data.setStyle(x),i.value=p(s,r.userCenter),await d(r.userCenter),t.disableChangeCoords||google.maps.event.addListener(s,"click",function(o){i.value.setPosition(o.latLng),d(o.latLng.toJSON())}),!e.currentPosition&&(a("map-loaded"),y.emit("map-loaded"))};C(()=>t.coords,()=>i.value.setPosition(event.latLng)),b(()=>{var e,o;((e=t==null?void 0:t.coords)==null?void 0:e.lat)&&((o=t==null?void 0:t.coords)==null?void 0:o.lng)?c(t.coords):navigator.geolocation.getCurrentPosition(l=>c({currentPosition:!0,lat:l.coords.latitude,lng:l.coords.longitude}),()=>c())})}},M={id:"map",style:{height:"100%",width:"100%"}};function B(t,a,r,i,s,p){return h(),k("div",M)}const O=T(_,[["render",B]]);export{O as P};
