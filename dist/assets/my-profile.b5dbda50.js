import{_ as j,o as _,j as L,w as B,f as c,n as Aa,a2 as yi,m as we,d as k,e as U,bZ as $a,b_ as Di,b$ as Mi,c0 as Ci,c1 as Ei,c as y,V as Oe,W as Be,s as Ie,r as M,t as m,a as C,h as O,C as Y,A as oe,ak as Za,P as ki,Q as xi,J as Ka,q as nt,v as st,g as me,p as qe,i as Ge,l as Ja,u as ei,R as Ti,b as Ct,x as Si,k as ti,am as Ai,L as $i,bX as Ii,H as Ia,O as Ri}from"./index.a87692b6.js";import{C as Ni,I as Pe,F as Qe,e as Oi,a as Bi}from"./InputComponent.8565bb3f.js";import{c as lt,a as W}from"./object.0e8161d1.js";import{G as ct}from"./GreenBtn.8a2bdb09.js";import{H as ai,S as Pi,W as Et}from"./Switcher.0688dd92.js";import{M as Ze}from"./ModalWindow.546b9b63.js";import{P as Li}from"./PlayerPageComponent.d82b199c.js";import{S as Wi}from"./VueStarRating.common.8764c71a.js";import{d as ii}from"./uk.cb0e459b.js";import{D as Fi}from"./Dropdown.a6b9a975.js";import{A as Ui}from"./index.ec420b96.js";import{C as kt}from"./CodeInput.1649c4ec.js";import{u as zi}from"./widthScreen.9cd91fc0.js";import"./SimpleListWrapper.9cc3d52f.js";import"./search.0f589d58.js";import"./Checkbox.093b1817.js";import"./v4.5d18198f.js";const Hi={name:"ModalUserWindow"},Yi={class:"b_modal_user_modal-window"};function Xi(i,t,a,e,s,o){return _(),L(we,null,{default:B(()=>[c("div",{class:"b_modal_user_wrapper",onClick:t[0]||(t[0]=yi(n=>i.$emit("close-modal"),["self"]))},[c("div",Yi,[Aa(i.$slots,"top-buttons",{},void 0,!0),Aa(i.$slots,"user-content",{},void 0,!0)])])]),_:3})}const Vi=j(Hi,[["render",Xi],["__scopeId","data-v-45c27b7e"]]);const Ra={0:"#DFDEED",1:"#FF1D1D",2:"#FFF61D",3:"#B2FF8E",4:"#79FFC7",5:"#62C7FF"},ji={name:"ReviewDetailsComponent",props:{userRate:{type:[String,Number],default:"0"}},setup(i){const t=k(Math.round(+i.userRate)),a=U(()=>Array.from({length:5},(o,n)=>Array.from({length:5},(r,d)=>({id:d,color:Ra[0]}))).map((o,n)=>n<t.value?o.map(r=>({...r,color:Ra[t.value]})):o)),e=U(()=>{switch(t.value){case 5:return Ei;case 4:return Ci;case 3:return Mi;case 2:return Di;case 1:return $a;default:return $a}});return{lines:a,emoji:e}}},qi={class:"b-review-details"},Gi={class:"b-review-details__emoji"},Qi=["src"],Zi={class:"b-review-details__lines"};function Ki(i,t,a,e,s,o){return _(),y("div",qi,[c("div",Gi,[c("img",{src:e.emoji,alt:""},null,8,Qi)]),c("div",Zi,[(_(!0),y(Oe,null,Be(e.lines,(n,r)=>(_(),y("div",{key:r,class:"b-review-details__block"},[(_(!0),y(Oe,null,Be(n,d=>(_(),y("div",{key:d.id,class:"b-review-details__line",style:Ie({background:d.color})},null,4))),128))]))),128))])])}const Ji=j(ji,[["render",Ki],["__scopeId","data-v-5afc6f1b"]]);const eo={name:"RatingCard",components:{ReviewDetailsComponent:Ji,StarRating:Wi},props:{ratingScale:{type:Number,default:null}},setup(){const i=k(!1),t=k(!0);k(!1);const a=U(()=>({rateBlock:Y.users_page.rateBlock}));function e(s){i.value=s,s&&oe.ReviewService.getMyReviews().then(o=>{o.data.results.length?t.value=o.data.results.map(n=>{var r,d;return{...n,author:{name:(r=n.author.profile)==null?void 0:r.name,last_name:(d=n.author.profile)==null?void 0:d.last_name},date:`${Za(n.time_created).locale(ii).format("D.MM.YYYY")}`}}):t.value=!1}).catch(o=>console.log("some mistake",o))}return{switchRate:e,rateStatus:i,usersReviews:t,mockData:a}}},to={class:"b-rating-card"},ao={class:"b-rating-card__top-table"},io={class:"b-rating-card__title"},oo={class:"b-rating-card__subtitle"},no={class:"b-rating-card__btns-block"},so={key:0,class:"b-rating-card__cards-block"},ro={key:0},lo={class:"b-rating-card__top-line"},co={class:"b-rating-card__name"},ho={class:"b-rating-card__rate"},uo={class:"b-rating-card__bottom-line"},fo={class:"b-rating-card__date"},po={key:1,class:"b-rating-card__no-reviews-block"},mo={class:"b-rating-card__no-data-title"},_o={class:"b-rating-card__no-data-text"};function go(i,t,a,e,s,o){const n=M("ReviewDetailsComponent"),r=M("star-rating");return _(),y("div",to,[c("div",ao,[c("div",io,m(i.$t("profile.my-rate")),1),c("div",oo,m(i.$t("profile.sub-rate")),1),C(n,{"user-rate":a.ratingScale},null,8,["user-rate"]),c("div",no,[c("div",{class:"b-rating-card__left-btn",style:Ie({border:`1px solid ${e.rateStatus?"#DFDEED":"#148581"}`}),onClick:t[0]||(t[0]=d=>e.switchRate(!1))},m(i.$t("profile.generally")),5),c("div",{class:"b-rating-card__right-btn",style:Ie({border:`1px solid ${e.rateStatus?"#148581":"#DFDEED"}`}),onClick:t[1]||(t[1]=d=>e.switchRate(!0))},m(i.$t("profile.detailed")),5)]),C(we,null,{default:B(()=>[e.rateStatus?(_(),y("div",so,[e.usersReviews?(_(),y("div",ro,[(_(!0),y(Oe,null,Be(e.usersReviews,(d,u)=>(_(),y("div",{key:d.id,class:"b-rating-card__card",style:Ie({"border-top":u!==0&&"1px dashed #DFDEED"})},[c("div",lo,[c("div",co,m(d.author.name)+" "+m(d.author.last_name),1),c("div",ho,[C(r,{rating:d.stars,"star-size":14,"show-rating":!1,"read-only":!0,"active-color":"#148783"},null,8,["rating"])])]),c("div",uo,[c("div",fo,m(d.date),1)])],4))),128))])):(_(),y("div",po,[c("div",mo,m(i.$t("profile.no-review")),1),c("div",_o,m(i.$t("profile.add-to-event")),1)]))])):O("",!0)]),_:1})])])}const vo=j(eo,[["render",go],["__scopeId","data-v-02539f9b"]]);const bo={name:"InputComponent",props:{isDisabled:{type:Boolean,default:!1},title:{type:String,default:""},placeholder:{type:String,default:""},height:{type:Number,default:null},name:{type:String,required:!0},mode:{type:String,default:"aggressive"}},setup(i){const{modelValue:t,modelErrorMessage:a,modelHandlers:e}=Ni(i),s=U(()=>({height:i.height?i.height+"px":"100%"}));return{modelValue:t,modelErrorMessage:a,modelHandlers:e,inputWrapper:s}}},wo={class:"b-text-area__component"},yo={key:0,class:"b-text-area__outer-title"},Do=["value","placeholder","disabled"],Mo={class:"b-text-area__error-message"};function Co(i,t,a,e,s,o){return _(),y("div",wo,[c("div",{class:"b-text-area__wrapper",style:Ie(e.inputWrapper)},[a.title?(_(),y("div",yo,[c("span",null,m(a.title),1)])):O("",!0),c("textarea",ki({value:e.modelValue,placeholder:a.placeholder,disabled:a.isDisabled},xi(e.modelHandlers,!0)),`
      `,16,Do)],4),c("p",Mo,m(e.modelErrorMessage),1)])}const Eo=j(bo,[["render",Co],["__scopeId","data-v-f6595f52"]]),ko="/assets/tick.79f61679.svg",xo="/assets/edit.5d6dbb7a.svg",To="/assets/add-user-pic2.c98bda8e.svg";const So={name:"UserDetailsCard",components:{InputComponent:Pe,Dropdown:Fi,TextAreaComponent:Eo,Avatar:Ui},props:{userData:{type:Object,default:()=>{}},phone:{type:String,default:""},isEditMode:{type:Boolean,default:!1}},emits:["openEditPictureModal"],setup(i,{emit:t}){const a=k(0),e=k(null),s=k(null),o=new FileReader,n=k([i.userData.age?`${i.userData.age} \u0440\u043E\u043A\u0456\u0432`:null,i.userData.gender,i.userData.role,i.userData.position]),r=U(()=>`${i.userData.name} ${i.userData.last_name}`),d=U(()=>({monthFromNumber:Y.users_page.months.monthFromNumber,numberFromMonth:Y.users_page.months.numberFromMonth,tabTitles:Y.profile.tabTitles,labels:Y.profile.labels,days:Y.dates.days,months:Y.dates.months,years:Y.dates.years,mainLag:Y.profile.mainLeg,cities:Y.profile.cities,district:Y.profile.district,position:Y.profile.position})),u=U(()=>({sortIcon:ai,tickIcon:ko,editIcon:xo})),l=U(()=>`${Za(i.userData.birthday).locale(ii).format("D MMMM YYYY")} p.`);function h(g){a.value=g}function f(g){e.value=g.target.files[0]}return o.onload=g=>{s.value=g.target.result,t("openEditPictureModal","edit_avatar",s.value)},Ka(()=>{e.value?o.readAsDataURL(e.value):s.value=null}),{changeUserTab:h,onFileSelected:f,currentTab:a,icons:u,birthDate:l,mockData:d,labels:n,fullUserName:r}}},Ao=i=>(qe("data-v-eb6e2d32"),i=i(),Ge(),i),$o={class:"b-user-card"},Io={class:"b-user-card__top-table"},Ro={class:"b-user-card__top-part"},No={class:"b-user-card__picture-block"},Oo={class:"b-user-card__profile-picture"},Bo=["src"],Po={key:2,class:"b-user-card__add-pic-icon"},Lo={for:"my_file"},Wo=Ao(()=>c("img",{src:To,alt:"add user picture"},null,-1)),Fo={class:"b-user-card__text-block"},Uo={class:"b-user-card__name-line-wrapper"},zo={class:"b-user-card__user-name"},Ho={class:"b-user-card__labels"},Yo={key:0},Xo={class:"b-user-card__tabs-block"},Vo={class:"b-user-card__tab-titles"},jo=["onClick"],qo={class:"b-user-card__main-tab-body"},Go={class:"b-user-card__tab-body"},Qo={key:0,class:"b-user-card__name-line"},Zo={class:"b-user-card__input-surname"},Ko={class:"b-user-card__input-name"},Jo={class:"b-user-card__textarea-line"},en={key:0,class:"b-user-card__about-me"},tn={class:"b-user-card__title"},an={class:"b-user-card__birthday-line"},on={key:0,class:"b-user-card__birth-date"},nn={class:"b-user-card__title"},sn={key:1,class:"b-user-card__dropdowns"},rn={class:"b-user-card__dropdown-days"},ln={class:"b-user-card__dropdown-months"},cn={class:"b-user-card__dropdown-years"},dn={class:"b-user-card__tab-body"},hn={class:"b-user-card__body-features"},un={class:"b-user-card__height"},fn={key:0,class:"b-user-card__to-show"},pn={class:"b-user-card__data"},mn={class:"b-user-card__title"},_n={class:"b-user-card__weight"},gn={key:0,class:"b-user-card__to-show"},vn={class:"b-user-card__data"},bn={class:"b-user-card__title"},wn={class:"b-user-card__main-leg"},yn={key:0,class:"b-user-card__to-show"},Dn={class:"b-user-card__data"},Mn={class:"b-user-card__title"},Cn={key:1,class:"b-user-card__dropdown-main-leg"},En={class:"b-user-card__position"},kn={key:0,class:"b-user-card__to-show"},xn={class:"b-user-card__data"},Tn={class:"b-user-card__title"},Sn={key:0,class:"b-user-card__tab-body"},An={class:"b-user-card__phone"},$n={key:0,class:"b-user-card__to-show"},In={class:"b-user-card__data"},Rn={class:"b-user-card__title"};function Nn(i,t,a,e,s,o){const n=M("Avatar"),r=M("InputComponent"),d=M("TextAreaComponent"),u=M("Dropdown");return _(),y("div",$o,[c("div",Io,[c("div",Ro,[c("div",No,[c("div",Oo,[a.userData.avatar_url?(_(),y("img",{key:0,src:a.userData.avatar_url,alt:""},null,8,Bo)):(_(),L(n,{key:1,"full-name":e.fullUserName},null,8,["full-name"])),a.isEditMode?(_(),y("div",Po,[c("label",Lo,[c("input",{type:"file",id:"my_file",style:{display:"none"},onChange:t[0]||(t[0]=(...l)=>e.onFileSelected&&e.onFileSelected(...l))},null,32),Wo])])):O("",!0)])]),c("div",Fo,[c("div",Uo,[c("div",zo,m(a.userData.name)+" "+m(a.userData.last_name),1)]),c("div",Ho,[(_(!0),y(Oe,null,Be(e.labels,l=>(_(),y("div",{key:l,class:"b-user-card__label"},[l?(_(),y("span",Yo," # "+m(l),1)):O("",!0)]))),128))])])])]),c("div",Xo,[c("div",Vo,[(_(!0),y(Oe,null,Be(e.mockData.tabTitles,l=>(_(),y("div",{key:l.id,class:"b-user-card__tab-title",style:Ie({"flex-basis":l.width,"margin-right":l.id!==2?"4px":0,background:e.currentTab===l.id?"#FFFFFF":"#F9F9FC",color:e.currentTab===l.id?"#262541":"#575775","font-weight":e.currentTab===l.id?500:400}),onClick:h=>e.changeUserTab(l.id)},m(l.title),13,jo))),128))]),c("div",qo,[nt(c("div",Go,[a.isEditMode?(_(),y("div",Qo,[c("div",Zo,[C(r,{"outside-title":!0,title:i.$t("profile.surname"),height:40,"title-width":0,name:"last_name"},null,8,["title"])]),c("div",Ko,[C(r,{"outside-title":!0,title:i.$t("profile.name"),height:40,"title-width":0,name:"name"},null,8,["title"])])])):O("",!0),c("div",Jo,[a.isEditMode?(_(),L(d,{key:1,height:88,title:i.$t("profile.words-about-myself"),name:"about_me"},null,8,["title"])):(_(),y("div",en,[me(m(a.userData.about_me)+" ",1),c("div",tn,m(i.$t("profile.about-myself")),1)]))]),c("div",an,[a.isEditMode?(_(),y("div",sn,[c("div",rn,[C(u,{placeholder:i.$t("profile.day"),"main-title":i.$t("profile.day"),options:e.mockData.days,"display-name":"name","display-value":"value",name:"day"},null,8,["placeholder","main-title","options"])]),c("div",ln,[C(u,{placeholder:i.$t("profile.month"),"main-title":i.$t("profile.month"),options:e.mockData.months,"display-name":"name","display-value":"value",name:"month"},null,8,["placeholder","main-title","options"])]),c("div",cn,[C(u,{placeholder:i.$t("profile.year"),"main-title":i.$t("profile.year"),options:e.mockData.years,"display-name":"name","display-value":"value",name:"year"},null,8,["placeholder","main-title","options"])])])):(_(),y("div",on,[me(m(e.birthDate)+" ",1),c("div",nn,m(i.$t("profile.birth-date")),1)]))])],512),[[st,e.currentTab===0]]),nt(c("div",dn,[c("div",hn,[c("div",un,[a.isEditMode?(_(),L(r,{key:1,"outside-title":!0,title:i.$t("profile.height"),height:40,"title-width":0,name:"height"},null,8,["title"])):(_(),y("div",fn,[c("div",pn,m(a.userData.height)+" "+m(i.$t("profile.sm")),1),c("div",mn,m(i.$t("profile.height")),1)]))]),c("div",_n,[a.isEditMode?(_(),L(r,{key:1,"outside-title":!0,title:i.$t("profile.weight"),height:40,"title-width":0,name:"weight"},null,8,["title"])):(_(),y("div",gn,[c("div",vn,m(a.userData.weight)+" "+m(i.$t("profile.kg")),1),c("div",bn,m(i.$t("profile.weight")),1)]))]),c("div",wn,[!a.isEditMode&&a.userData.working_leg?(_(),y("div",yn,[c("div",Dn,m(a.userData.working_leg),1),c("div",Mn,m(i.$t("profile.main-leg")),1)])):O("",!0),a.isEditMode?(_(),y("div",Cn,[C(u,{"main-title":i.$t("profile.main-leg"),placeholder:i.$t("profile.main-leg"),options:e.mockData.mainLag,"display-name":"name","display-value":"value",name:"working_leg"},null,8,["main-title","placeholder","options"])])):O("",!0)])]),c("div",En,[a.isEditMode?(_(),L(u,{key:1,"outside-title":!0,placeholder:i.$t("profile.game-position"),"main-title":i.$t("profile.game-position"),options:e.mockData.position,width:200,height:40,"display-name":"name","display-value":"value",name:"position"},null,8,["placeholder","main-title","options"])):(_(),y("div",kn,[c("div",xn,m(a.userData.position),1),c("div",Tn,m(i.$t("profile.game-position")),1)]))])],512),[[st,e.currentTab===1]]),e.currentTab===2?(_(),y("div",Sn,[c("div",An,[a.isEditMode?(_(),L(r,{key:1,title:i.$t("profile.phone"),placeholder:a.phone,"title-width":0,"outside-title":!0,height:40,name:"phone"},null,8,["title","placeholder"])):(_(),y("div",$n,[c("div",In,m(a.phone),1),c("div",Rn,m(i.$t("profile.phone")),1)]))])])):O("",!0)])])])}const On=j(So,[["render",Nn],["__scopeId","data-v-eb6e2d32"]]),Bn="/assets/lock.f6c234fd.svg";const Pn={name:"SecurityBlock",components:{Switcher:Pi,InputComponent:Pe},props:{userEmail:{type:String,default:""},checkboxData:{type:Object,default:()=>{}},isEditMode:{type:Boolean,default:!1}},emits:["toggleModal"],setup(i,t){const a=k(null),e=U(()=>ai);function s(o){t.emit("toggleModal",o)}return{toggleModalWindow:s,sortArrowHorizontal:e,checkboxForm:a}}},Ln=i=>(qe("data-v-c2c52181"),i=i(),Ge(),i),Wn={class:"b-security"},Fn={class:"b-security__confidentiality"},Un={class:"b-security__title"},zn={class:"b-security__subtitle"},Hn={class:"b-security__settings-block"},Yn={class:"b-security__personal-settings"},Xn={class:"b-security__personal-settings"},Vn={class:"b-security__personal-settings"},jn={class:"b-security__top-table"},qn={class:"b-security__title"},Gn={class:"b-security__subtitle-security"},Qn={class:"b-security__email-input"},Zn=Ln(()=>c("img",{src:Bn,alt:""},null,-1));function Kn(i,t,a,e,s,o){const n=M("Switcher"),r=M("InputComponent");return _(),y("div",Wn,[c("div",Fn,[c("div",Un,m(i.$t("profile.confidentiality")),1),c("div",zn,m(i.$t("profile.set-personal-details")),1),c("div",Hn,[c("div",Yn,[c("p",null,m(i.$t("profile.phone-number")),1),C(n,{id:"phone","is-edit-mode":a.isEditMode,name:"config_phone"},null,8,["is-edit-mode"])]),c("div",Xn,[c("p",null,m(i.$t("profile.e-mail")),1),C(n,{id:"email","is-edit-mode":a.isEditMode,name:"config_email"},null,8,["is-edit-mode"])]),c("div",Vn,[c("p",null,m(i.$t("profile.my-feedbacks")),1),C(n,{id:"feedback","is-edit-mode":a.isEditMode,name:"show_reviews"},null,8,["is-edit-mode"])])])]),c("div",jn,[c("div",qn,m(i.$t("profile.safety")),1),c("div",Gn,m(i.$t("profile.change-login&password")),1),c("div",Qn,[C(r,{title:i.$t("profile.e-mail"),placeholder:a.userEmail,isDisabled:!0,"title-width":0,"outside-title":!0,icon:e.sortArrowHorizontal,onIconClick:t[0]||(t[0]=d=>e.toggleModalWindow("email")),name:"change_email"},null,8,["title","placeholder","icon"])]),c("div",{class:"b-security__change-pass-btn",onClick:t[1]||(t[1]=d=>e.toggleModalWindow("change_password"))},[me(m(i.$t("profile.change-password"))+" ",1),Zn])]),c("div",{class:"b-security__delete-account",onClick:t[2]||(t[2]=d=>e.toggleModalWindow("delete_acc"))},m(i.$t("profile.delete-account")),1)])}const Jn=j(Pn,[["render",Kn],["__scopeId","data-v-c2c52181"]]);const es={name:"TabLabel",props:{title:{type:String,default:""},text:{type:String,default:""}}},ts=i=>(qe("data-v-f471e6ea"),i=i(),Ge(),i),as={class:"b-tab-label__label"},is=ts(()=>c("div",{class:"b-tab-label__label-corner"},null,-1)),os={class:"b-tab-label__label-title"},ns={class:"b-tab-label__label-text"};function ss(i,t,a,e,s,o){return _(),y("div",as,[is,c("div",os,m(a.title),1),c("div",ns,m(a.text),1)])}const rs=j(es,[["render",ss],["__scopeId","data-v-f471e6ea"]]);const ls={name:"Counter",props:{startTime:{type:Number,default:30},counterText:{type:String,default:""},email:{type:String,default:""}},emits:["resendCodeAction"],setup(i){const t=k(i.startTime),a=k();return a.value=setInterval(()=>{t.value!==0&&t.value--},1e3),Ja(()=>{clearInterval(a.value),t.value=i.startTime}),{seconds:t}}},cs={class:"b-counter"},ds={key:0,class:"b-counter__sms-text"},hs={key:1,class:"b-counter__sms-text"};function us(i,t,a,e,s,o){return _(),y("span",cs,[e.seconds?(_(),y("p",ds,m(a.counterText)+" "+m(a.email)+" "+m(i.$t("counter.during"))+" "+m(e.seconds)+" "+m(i.$t("counter.seconds")),1)):(_(),y("p",hs,[me(m(i.$t("counter.sms-not-came"))+" ",1),c("span",{onClick:t[0]||(t[0]=n=>i.$emit("resendCodeAction"))},m(i.$t("counter.send-again")),1)]))])}const xt=j(ls,[["render",us],["__scopeId","data-v-c59c2ad1"]]),fs="/assets/warning.24c97baa.svg",ps={name:"DeleteAccountModal",components:{ModalWindow:Ze,CodeInput:kt,Form:Qe,Counter:xt},props:{userEmail:{type:String,default:""}},emits:["closeModal"],setup(i,t){const a=ei(),e=k({first:!0,second:!1}),s=U(()=>lt({verify_code:W().required().min(5)}));function o(){e.value={first:!0,second:!1},t.emit("closeModal","delete_acc")}function n(){e.value={first:!1,second:!0},oe.UserService.deleteMyProfile()}function r(d){oe.UserService.sendApproveCode(d.controlledValues).then(()=>{localStorage.removeItem("token"),a.push(Ti.AUTHENTICATIONS.LOGIN.absolute)}).catch(u=>{console.log("Delete account error",u)})}return{sendCodeForDeleteAcc:n,closeModal:o,deleteAcc:r,modalDeleteAcc:e,schema:s}}},ms=c("img",{src:fs,alt:""},null,-1),_s={key:0,class:"first-screen"},gs={class:"description-text"},vs={class:"btns-block"},bs={key:1,class:"second-screen"},ws={class:"description-title-second"},ys={class:"description-text"},Ds={class:"code-input-field"},Ms={class:"btns-block"},Cs=["onClick"];function Es(i,t,a,e,s,o){const n=M("Counter"),r=M("CodeInput"),d=M("Form"),u=M("ModalWindow");return _(),L(we,null,{default:B(()=>[C(u,{"title-color":"#C10B0B",onCloseModal:e.closeModal},{title:B(()=>[me(m(i.$t("modals.delete_acc.title")),1)]),"title-icon":B(()=>[ms]),"delete-account":B(()=>[e.modalDeleteAcc.first?(_(),y("div",_s,[c("div",gs,m(i.$t("modals.delete_acc.text")),1),c("div",vs,[c("div",{class:"cancle-delete-acc",onClick:t[0]||(t[0]=(...l)=>e.closeModal&&e.closeModal(...l))},m(i.$t("buttons.cancel-deleting")),1),c("div",{class:"delete-acc",onClick:t[1]||(t[1]=(...l)=>e.sendCodeForDeleteAcc&&e.sendCodeForDeleteAcc(...l))},m(i.$t("buttons.delete-account")),1)])])):O("",!0),e.modalDeleteAcc.second?(_(),y("div",bs,[c("div",ws,m(i.$t("modals.delete_acc.title-second")),1),c("div",ys,[C(n,{"start-time":30,"counter-text":i.$t("modals.delete_acc.text-second"),email:a.userEmail,onResendCodeAction:e.sendCodeForDeleteAcc},null,8,["counter-text","email","onResendCodeAction"])]),C(d,{"validation-schema":e.schema},{default:B(l=>[c("div",Ds,[C(r,{fields:5,fieldWidth:48,fieldHeight:40,required:!0,name:"verify_code",onComplete:t[2]||(t[2]=h=>i.completed=!0)})]),c("div",Ms,[c("div",{class:"cancle-delete-acc",onClick:t[3]||(t[3]=(...h)=>e.closeModal&&e.closeModal(...h))},m(i.$t("buttons.cancel-deleting")),1),c("div",{class:"delete-acc",onClick:h=>e.deleteAcc(l)},m(i.$t("buttons.delete-account")),9,Cs)])]),_:1},8,["validation-schema"])])):O("",!0)]),_:1},8,["onCloseModal"])]),_:1})}const ks=j(ps,[["render",Es]]),xs="/assets/key.5c61231d.svg",Na=30,Ts={name:"ChangePasswordModal",props:{userEmail:{type:String,default:""}},components:{Form:Qe,ModalWindow:Ze,CodeInput:kt,InputComponent:Pe,Counter:xt},setup(i,t){const{t:a}=Ct(),e=k(1),s=k(""),o=k(Na),n=U(()=>lt({old_password:W().required().min(8),new_password:W().required().min(8),password_code:W().required().min(5)})),r=U(()=>Oi),d=U(()=>Bi);function u(){e.value=1,t.emit("closeModal","change_password")}function l(f){const g=f.controlledValues.new_password,b=f.controlledValues.old_password,v={new_password:g,old_password:b};oe.UserService.changePassword(v),o.value=Na}function h(f){const g=f.controlledValues.new_password,b=f.controlledValues.old_password,v=f.controlledValues.password_code;if(e.value===1&&g&&b){const w={new_password:g,old_password:b};oe.UserService.changePassword(w).then(()=>{s.value="",e.value=2}).catch(x=>{s.value=a("modals.change_password.wrong-old-pass")})}if(e.value===2&&v){const w={verify_code:v};oe.UserService.sendApproveCode(w).then(()=>{s.value="",u()}).catch(x=>{console.log("change password error",x.data.error),s.value=a("modals.change_password.server-error")})}}return{closeModal:u,changePassword:h,resendCode:l,modalChangeStep:e,schema:n,eyeCrossed:r,eyeOpened:d,errorMessage:s,seconds:o,errorMessage:s}}},Ss=c("img",{src:xs,alt:""},null,-1),As={class:"inut-wrapper"},$s={class:"inut-wrapper"},Is={key:0},Rs={class:"sms-code-block"},Ns={key:1,class:"error-message"},Os={class:"btns-block"},Bs=["onClick"];function Ps(i,t,a,e,s,o){const n=M("InputComponent"),r=M("Counter"),d=M("CodeInput"),u=M("Form"),l=M("ModalWindow");return _(),L(we,null,{default:B(()=>[C(l,{onCloseModal:e.closeModal},{title:B(()=>[me(m(i.$t("modals.change_password.title")),1)]),"title-icon":B(()=>[Ss]),"change-password":B(()=>[C(u,{"validation-schema":e.schema},{default:B(h=>[c("div",As,[C(n,{title:i.$t("modals.change_password.current-pass"),"title-width":0,type:"password","outside-title":!0,name:"old_password"},null,8,["title"])]),c("div",$s,[C(n,{title:i.$t("modals.change_password.new-pass"),"title-width":0,type:"password","outside-title":!0,name:"new_password"},null,8,["title"])]),e.modalChangeStep===2?(_(),y("div",Is,[C(r,{"start-time":30,"counter-text":i.$t("modals.change_password.sms-code"),email:a.userEmail,onResendCodeAction:f=>e.resendCode(h)},null,8,["counter-text","email","onResendCodeAction"])])):O("",!0),nt(c("div",Rs,[C(d,{fields:5,fieldWidth:48,fieldHeight:40,required:!0,name:"password_code",onComplete:t[0]||(t[0]=f=>i.completed=!0)})],512),[[st,e.modalChangeStep===2]]),e.errorMessage.length?(_(),y("div",Ns," *"+m(e.errorMessage),1)):O("",!0),c("div",Os,[c("div",{class:"cancle-btn",onClick:t[1]||(t[1]=(...f)=>e.closeModal&&e.closeModal(...f))},m(i.$t("buttons.cancel-editing")),1),c("div",{class:"save-btn",onClick:f=>e.changePassword(h)},m(i.$t("buttons.save-changes")),9,Bs)])]),_:1},8,["validation-schema"])]),_:1},8,["onCloseModal"])]),_:1})}const Ls=j(Ts,[["render",Ps]]);const Ws={name:"ChangeUserDataModal",components:{GreenBtn:ct,WhiteBtn:Et},props:{title:{type:String,default:""},config:{type:Object,default:()=>{}}},emits:["closeModal","saveChanges","saveDeclineChanges"],setup(i,t){function a(){t.emit("closeModal","change_data")}return{closeModal:a}}},Fs={class:"b-change-data__wrapper"},Us={class:"b-change-data"},zs={class:"b-change-data__title-block"},Hs={class:"b-change-data__title"},Ys={class:"b-change-data__main-text"},Xs={class:"b-change-data__btns-block"},Vs={class:"b-change-data__first-btn"},js={class:"b-change-data__second-btn"},qs={class:"b-change-data__cancel-changes"};function Gs(i,t,a,e,s,o){const n=M("GreenBtn"),r=M("WhiteBtn");return _(),L(we,null,{default:B(()=>[c("div",Fs,[c("div",Us,[c("div",zs,[c("div",Hs,m(a.config.title),1),c("div",{class:"b-change-data__close",onClick:t[0]||(t[0]=(...d)=>e.closeModal&&e.closeModal(...d))}," \xD7 ")]),c("div",Ys,m(i.$t("modals.change_user_data.main-text")),1),c("div",Xs,[c("div",Vs,[C(n,{text:a.config.button_1,width:a.config.btn_with_1,"background-color":"#575775","font-styles":{"font-size":"13px"}},null,8,["text","width"])]),c("div",js,[C(r,{text:a.config.button_2,width:a.config.btn_with_2,"main-color":"#C5C5D3","font-styles":{"font-size":"13px"},onClickFunction:t[1]||(t[1]=d=>i.$emit("saveDeclineChanges",a.config.btn_action))},null,8,["text","width"])])]),c("div",qs,m(i.$t("modals.change_user_data.cancel-changes")),1)])])]),_:1})}const Qs=j(Ws,[["render",Gs],["__scopeId","data-v-6483e6c5"]]),Zs="/assets/envelop.1ca984d9.svg",Ks={name:"ChangeEmailModal",components:{ModalWindow:Ze,InputComponent:Pe,Counter:xt,CodeInput:kt,Form:Qe},props:{userEmail:{type:String,default:""}},emits:["closeModal","email"],setup(i,t){const{t:a}=Ct(),e=k({first:!0,second:!1}),s=k(""),o=U(()=>lt({verify_code:W().required().min(5),email:W().required()})),n=U(()=>e.value.first?a("buttons.cancel-editing"):a("buttons.return")),r=U(()=>e.value.first?a("buttons.save-changes"):a("buttons.approve"));function d(v,w){e.value={first:v,second:w}}function u(){e.value.first?g():d(!0,!1)}function l(v){let w;e.value.first?(d(!1,!0),w={email:v.controlledValues.email},s.value=w,f(w)):(w={verify_code:v.controlledValues.verify_code},oe.UserService.sendApproveCode(w).then(()=>{g(),t.emit("email")}))}function h(){f(s.value)}function f(v){oe.UserService.changeUserEmail(v)}function g(){d(!0,!1),t.emit("closeModal","email")}function b(){}return{closeModal:g,cancelClick:u,saveClick:l,sendCodeForChangeEmail:b,sendEmailAgain:h,modalSteps:e,schema:o,cancelBtnTitle:n,saveBtnTitle:r}}},Js=c("img",{src:Zs,alt:""},null,-1),er={key:0,class:"inut-wrapper"},tr={class:"inut-wrapper"},ar={key:0,class:"description-text"},ir={class:"code-input-field"},or={class:"btns-block"},nr=["onClick"];function sr(i,t,a,e,s,o){const n=M("InputComponent"),r=M("Counter"),d=M("CodeInput"),u=M("Form"),l=M("ModalWindow");return _(),L(we,null,{default:B(()=>[C(l,{onCloseModal:e.closeModal},{title:B(()=>[me(m(i.$t("modals.change_login.title")),1)]),"title-icon":B(()=>[Js]),"change-login":B(()=>[e.modalSteps.first?(_(),y("div",er,[C(n,{title:i.$t("modals.change_login.current-email"),placeholder:a.userEmail,"outside-title":!0,"title-width":0,"is-disabled":!0},null,8,["title","placeholder"])])):O("",!0),C(u,{"validation-schema":e.schema},{default:B(h=>[c("div",tr,[C(n,{title:e.modalSteps.first?i.$t("modals.change_login.new-email"):i.$t("modals.change_login.email"),placeholder:"example@panda.com","outside-title":!0,"title-width":0,"is-disabled":!e.modalSteps.first,name:"email"},null,8,["title","placeholder","is-disabled"])]),e.modalSteps.second?(_(),y("div",ar,[C(r,{"start-time":30,"counter-text":i.$t("modals.change_login.code-message"),email:a.userEmail,onResendCodeAction:e.sendEmailAgain},null,8,["counter-text","email","onResendCodeAction"])])):O("",!0),nt(c("div",ir,[C(d,{fields:5,fieldWidth:48,fieldHeight:40,required:!0,name:"verify_code",onComplete:t[0]||(t[0]=f=>i.completed=!0)})],512),[[st,e.modalSteps.second]]),c("div",or,[c("div",{class:"cancle-btn",onClick:t[1]||(t[1]=(...f)=>e.cancelClick&&e.cancelClick(...f))},m(e.cancelBtnTitle),1),c("div",{class:"save-btn",onClick:f=>e.saveClick(h)},m(e.saveBtnTitle),9,nr)])]),_:1},8,["validation-schema"])]),_:1},8,["onCloseModal"])]),_:1})}const rr=j(Ks,[["render",sr]]),lr="/assets/set-filter-white.9cf6d1ba.svg";const cr={name:"ButtonsBlock",components:{GreenBtn:ct,WhiteBtn:Et},props:{isEditModeProfile:{type:Boolean,default:!0},editBtnWidth:{type:Number,default:197},cancelBtnWidth:{type:[Number,String],default:98},saveBtnWidth:{type:[Number,String],default:89}},emits:["cancelDataEdit","saveDataEdit","toggleModal","toggleEditMode"],setup(){return{icons:U(()=>({editIcon:lr}))}}},dr={class:"b-user-cabinet__buttons"},hr={key:0,class:"b-user-cabinet__save-cancel-btns"},ur={class:"b-user-cabinet__btns-line"},fr={class:"b-user-cabinet__btn-cancel"},pr={class:"b-user-cabinet__btn-save"},mr={key:1,class:"b-user-cabinet__edit-button"};function _r(i,t,a,e,s,o){const n=M("WhiteBtn"),r=M("GreenBtn");return _(),y("div",dr,[a.isEditModeProfile?(_(),y("div",hr,[c("div",ur,[c("div",fr,[C(n,{text:i.$t("buttons.cancel"),width:a.cancelBtnWidth,onClickFunction:t[0]||(t[0]=d=>i.$emit("cancelDataEdit"))},null,8,["text","width"])]),c("div",pr,[C(r,{text:i.$t("buttons.save"),width:a.saveBtnWidth,onClickFunction:t[1]||(t[1]=d=>i.$emit("saveDataEdit"))},null,8,["text","width"])])]),c("div",{class:"b-user-cabinet__look-preview",onClick:t[2]||(t[2]=d=>i.$emit("toggleModal","public_profile"))},m(i.$t("profile.how-profile-looks")),1)])):(_(),y("div",mr,[C(r,{text:i.$t("buttons.edit-profile"),width:a.editBtnWidth,height:40,icon:e.icons.editIcon,onClickFunction:t[3]||(t[3]=d=>i.$emit("toggleEditMode"))},null,8,["text","width","icon"])]))])}const gr=j(cr,[["render",_r],["__scopeId","data-v-942328fb"]]);/*!
 * Cropper.js v1.5.13
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2022-11-20T05:30:46.114Z
 */function Oa(i,t){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);t&&(e=e.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),a.push.apply(a,e)}return a}function oi(i){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Oa(Object(a),!0).forEach(function(e){wr(i,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):Oa(Object(a)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(a,e))})}return i}function pt(i){return pt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(i)}function vr(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Ba(i,t){for(var a=0;a<t.length;a++){var e=t[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}function br(i,t,a){return t&&Ba(i.prototype,t),a&&Ba(i,a),Object.defineProperty(i,"prototype",{writable:!1}),i}function wr(i,t,a){return t in i?Object.defineProperty(i,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[t]=a,i}function ni(i){return yr(i)||Dr(i)||Mr(i)||Cr()}function yr(i){if(Array.isArray(i))return mt(i)}function Dr(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Mr(i,t){if(!!i){if(typeof i=="string")return mt(i,t);var a=Object.prototype.toString.call(i).slice(8,-1);if(a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set")return Array.from(i);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return mt(i,t)}}function mt(i,t){(t==null||t>i.length)&&(t=i.length);for(var a=0,e=new Array(t);a<t;a++)e[a]=i[a];return e}function Cr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var dt=typeof window<"u"&&typeof window.document<"u",ce=dt?window:{},Tt=dt&&ce.document.documentElement?"ontouchstart"in ce.document.documentElement:!1,St=dt?"PointerEvent"in ce:!1,R="cropper",At="all",si="crop",ri="move",li="zoom",ge="e",ve="w",Se="s",ue="n",Ue="ne",ze="nw",He="se",Ye="sw",_t="".concat(R,"-crop"),Pa="".concat(R,"-disabled"),Q="".concat(R,"-hidden"),La="".concat(R,"-hide"),Er="".concat(R,"-invisible"),rt="".concat(R,"-modal"),gt="".concat(R,"-move"),Ve="".concat(R,"Action"),it="".concat(R,"Preview"),$t="crop",ci="move",di="none",vt="crop",bt="cropend",wt="cropmove",yt="cropstart",Wa="dblclick",kr=Tt?"touchstart":"mousedown",xr=Tt?"touchmove":"mousemove",Tr=Tt?"touchend touchcancel":"mouseup",Fa=St?"pointerdown":kr,Ua=St?"pointermove":xr,za=St?"pointerup pointercancel":Tr,Ha="ready",Ya="resize",Xa="wheel",Dt="zoom",Va="image/jpeg",Sr=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Ar=/^data:/,$r=/^data:image\/jpeg;base64,/,Ir=/^img|canvas$/i,hi=200,ui=100,ja={viewMode:0,dragMode:$t,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:hi,minContainerHeight:ui,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Rr='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Nr=Number.isNaN||ce.isNaN;function E(i){return typeof i=="number"&&!Nr(i)}var qa=function(t){return t>0&&t<1/0};function ht(i){return typeof i>"u"}function be(i){return pt(i)==="object"&&i!==null}var Or=Object.prototype.hasOwnProperty;function Ae(i){if(!be(i))return!1;try{var t=i.constructor,a=t.prototype;return t&&a&&Or.call(a,"isPrototypeOf")}catch{return!1}}function G(i){return typeof i=="function"}var Br=Array.prototype.slice;function fi(i){return Array.from?Array.from(i):Br.call(i)}function F(i,t){return i&&G(t)&&(Array.isArray(i)||E(i.length)?fi(i).forEach(function(a,e){t.call(i,a,e,i)}):be(i)&&Object.keys(i).forEach(function(a){t.call(i,i[a],a,i)})),i}var N=Object.assign||function(t){for(var a=arguments.length,e=new Array(a>1?a-1:0),s=1;s<a;s++)e[s-1]=arguments[s];return be(t)&&e.length>0&&e.forEach(function(o){be(o)&&Object.keys(o).forEach(function(n){t[n]=o[n]})}),t},Pr=/\.\d*(?:0|9){12}\d*$/;function Re(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Pr.test(i)?Math.round(i*t)/t:i}var Lr=/^width|height|left|top|marginLeft|marginTop$/;function fe(i,t){var a=i.style;F(t,function(e,s){Lr.test(s)&&E(e)&&(e="".concat(e,"px")),a[s]=e})}function Wr(i,t){return i.classList?i.classList.contains(t):i.className.indexOf(t)>-1}function z(i,t){if(!!t){if(E(i.length)){F(i,function(e){z(e,t)});return}if(i.classList){i.classList.add(t);return}var a=i.className.trim();a?a.indexOf(t)<0&&(i.className="".concat(a," ").concat(t)):i.className=t}}function le(i,t){if(!!t){if(E(i.length)){F(i,function(a){le(a,t)});return}if(i.classList){i.classList.remove(t);return}i.className.indexOf(t)>=0&&(i.className=i.className.replace(t,""))}}function $e(i,t,a){if(!!t){if(E(i.length)){F(i,function(e){$e(e,t,a)});return}a?z(i,t):le(i,t)}}var Fr=/([a-z\d])([A-Z])/g;function It(i){return i.replace(Fr,"$1-$2").toLowerCase()}function Mt(i,t){return be(i[t])?i[t]:i.dataset?i.dataset[t]:i.getAttribute("data-".concat(It(t)))}function je(i,t,a){be(a)?i[t]=a:i.dataset?i.dataset[t]=a:i.setAttribute("data-".concat(It(t)),a)}function Ur(i,t){if(be(i[t]))try{delete i[t]}catch{i[t]=void 0}else if(i.dataset)try{delete i.dataset[t]}catch{i.dataset[t]=void 0}else i.removeAttribute("data-".concat(It(t)))}var pi=/\s\s*/,mi=function(){var i=!1;if(dt){var t=!1,a=function(){},e=Object.defineProperty({},"once",{get:function(){return i=!0,t},set:function(o){t=o}});ce.addEventListener("test",a,e),ce.removeEventListener("test",a,e)}return i}();function ie(i,t,a){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=a;t.trim().split(pi).forEach(function(o){if(!mi){var n=i.listeners;n&&n[o]&&n[o][a]&&(s=n[o][a],delete n[o][a],Object.keys(n[o]).length===0&&delete n[o],Object.keys(n).length===0&&delete i.listeners)}i.removeEventListener(o,s,e)})}function te(i,t,a){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=a;t.trim().split(pi).forEach(function(o){if(e.once&&!mi){var n=i.listeners,r=n===void 0?{}:n;s=function(){delete r[o][a],i.removeEventListener(o,s,e);for(var u=arguments.length,l=new Array(u),h=0;h<u;h++)l[h]=arguments[h];a.apply(i,l)},r[o]||(r[o]={}),r[o][a]&&i.removeEventListener(o,r[o][a],e),r[o][a]=s,i.listeners=r}i.addEventListener(o,s,e)})}function Ne(i,t,a){var e;return G(Event)&&G(CustomEvent)?e=new CustomEvent(t,{detail:a,bubbles:!0,cancelable:!0}):(e=document.createEvent("CustomEvent"),e.initCustomEvent(t,!0,!0,a)),i.dispatchEvent(e)}function _i(i){var t=i.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var ut=ce.location,zr=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Ga(i){var t=i.match(zr);return t!==null&&(t[1]!==ut.protocol||t[2]!==ut.hostname||t[3]!==ut.port)}function Qa(i){var t="timestamp=".concat(new Date().getTime());return i+(i.indexOf("?")===-1?"?":"&")+t}function Xe(i){var t=i.rotate,a=i.scaleX,e=i.scaleY,s=i.translateX,o=i.translateY,n=[];E(s)&&s!==0&&n.push("translateX(".concat(s,"px)")),E(o)&&o!==0&&n.push("translateY(".concat(o,"px)")),E(t)&&t!==0&&n.push("rotate(".concat(t,"deg)")),E(a)&&a!==1&&n.push("scaleX(".concat(a,")")),E(e)&&e!==1&&n.push("scaleY(".concat(e,")"));var r=n.length?n.join(" "):"none";return{WebkitTransform:r,msTransform:r,transform:r}}function Hr(i){var t=oi({},i),a=0;return F(i,function(e,s){delete t[s],F(t,function(o){var n=Math.abs(e.startX-o.startX),r=Math.abs(e.startY-o.startY),d=Math.abs(e.endX-o.endX),u=Math.abs(e.endY-o.endY),l=Math.sqrt(n*n+r*r),h=Math.sqrt(d*d+u*u),f=(h-l)/l;Math.abs(f)>Math.abs(a)&&(a=f)})}),a}function ot(i,t){var a=i.pageX,e=i.pageY,s={endX:a,endY:e};return t?s:oi({startX:a,startY:e},s)}function Yr(i){var t=0,a=0,e=0;return F(i,function(s){var o=s.startX,n=s.startY;t+=o,a+=n,e+=1}),t/=e,a/=e,{pageX:t,pageY:a}}function pe(i){var t=i.aspectRatio,a=i.height,e=i.width,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",o=qa(e),n=qa(a);if(o&&n){var r=a*t;s==="contain"&&r>e||s==="cover"&&r<e?a=e/t:e=a*t}else o?a=e/t:n&&(e=a*t);return{width:e,height:a}}function Xr(i){var t=i.width,a=i.height,e=i.degree;if(e=Math.abs(e)%180,e===90)return{width:a,height:t};var s=e%90*Math.PI/180,o=Math.sin(s),n=Math.cos(s),r=t*n+a*o,d=t*o+a*n;return e>90?{width:d,height:r}:{width:r,height:d}}function Vr(i,t,a,e){var s=t.aspectRatio,o=t.naturalWidth,n=t.naturalHeight,r=t.rotate,d=r===void 0?0:r,u=t.scaleX,l=u===void 0?1:u,h=t.scaleY,f=h===void 0?1:h,g=a.aspectRatio,b=a.naturalWidth,v=a.naturalHeight,w=e.fillColor,x=w===void 0?"transparent":w,$=e.imageSmoothingEnabled,I=$===void 0?!0:$,A=e.imageSmoothingQuality,S=A===void 0?"low":A,p=e.maxWidth,T=p===void 0?1/0:p,P=e.maxHeight,X=P===void 0?1/0:P,J=e.minWidth,V=J===void 0?0:J,de=e.minHeight,ne=de===void 0?0:de,Z=document.createElement("canvas"),H=Z.getContext("2d"),se=pe({aspectRatio:g,width:T,height:X}),ye=pe({aspectRatio:g,width:V,height:ne},"cover"),_e=Math.min(se.width,Math.max(ye.width,b)),he=Math.min(se.height,Math.max(ye.height,v)),Ke=pe({aspectRatio:s,width:T,height:X}),Le=pe({aspectRatio:s,width:V,height:ne},"cover"),We=Math.min(Ke.width,Math.max(Le.width,o)),Fe=Math.min(Ke.height,Math.max(Le.height,n)),Je=[-We/2,-Fe/2,We,Fe];return Z.width=Re(_e),Z.height=Re(he),H.fillStyle=x,H.fillRect(0,0,_e,he),H.save(),H.translate(_e/2,he/2),H.rotate(d*Math.PI/180),H.scale(l,f),H.imageSmoothingEnabled=I,H.imageSmoothingQuality=S,H.drawImage.apply(H,[i].concat(ni(Je.map(function(et){return Math.floor(Re(et))})))),H.restore(),Z}var gi=String.fromCharCode;function jr(i,t,a){var e="";a+=t;for(var s=t;s<a;s+=1)e+=gi(i.getUint8(s));return e}var qr=/^data:.*,/;function Gr(i){var t=i.replace(qr,""),a=atob(t),e=new ArrayBuffer(a.length),s=new Uint8Array(e);return F(s,function(o,n){s[n]=a.charCodeAt(n)}),e}function Qr(i,t){for(var a=[],e=8192,s=new Uint8Array(i);s.length>0;)a.push(gi.apply(null,fi(s.subarray(0,e)))),s=s.subarray(e);return"data:".concat(t,";base64,").concat(btoa(a.join("")))}function Zr(i){var t=new DataView(i),a;try{var e,s,o;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var n=t.byteLength,r=2;r+1<n;){if(t.getUint8(r)===255&&t.getUint8(r+1)===225){s=r;break}r+=1}if(s){var d=s+4,u=s+10;if(jr(t,d,4)==="Exif"){var l=t.getUint16(u);if(e=l===18761,(e||l===19789)&&t.getUint16(u+2,e)===42){var h=t.getUint32(u+4,e);h>=8&&(o=u+h)}}}if(o){var f=t.getUint16(o,e),g,b;for(b=0;b<f;b+=1)if(g=o+b*12+2,t.getUint16(g,e)===274){g+=8,a=t.getUint16(g,e),t.setUint16(g,1,e);break}}}catch{a=1}return a}function Kr(i){var t=0,a=1,e=1;switch(i){case 2:a=-1;break;case 3:t=-180;break;case 4:e=-1;break;case 5:t=90,e=-1;break;case 6:t=90;break;case 7:t=90,a=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:a,scaleY:e}}var Jr={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,a=this.options,e=this.container,s=this.cropper,o=Number(a.minContainerWidth),n=Number(a.minContainerHeight);z(s,Q),le(t,Q);var r={width:Math.max(e.offsetWidth,o>=0?o:hi),height:Math.max(e.offsetHeight,n>=0?n:ui)};this.containerData=r,fe(s,{width:r.width,height:r.height}),z(t,Q),le(s,Q)},initCanvas:function(){var t=this.containerData,a=this.imageData,e=this.options.viewMode,s=Math.abs(a.rotate)%180===90,o=s?a.naturalHeight:a.naturalWidth,n=s?a.naturalWidth:a.naturalHeight,r=o/n,d=t.width,u=t.height;t.height*r>t.width?e===3?d=t.height*r:u=t.width/r:e===3?u=t.width/r:d=t.height*r;var l={aspectRatio:r,naturalWidth:o,naturalHeight:n,width:d,height:u};this.canvasData=l,this.limited=e===1||e===2,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(t.width-l.width)/2,l.top=(t.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=N({},l)},limitCanvas:function(t,a){var e=this.options,s=this.containerData,o=this.canvasData,n=this.cropBoxData,r=e.viewMode,d=o.aspectRatio,u=this.cropped&&n;if(t){var l=Number(e.minCanvasWidth)||0,h=Number(e.minCanvasHeight)||0;r>1?(l=Math.max(l,s.width),h=Math.max(h,s.height),r===3&&(h*d>l?l=h*d:h=l/d)):r>0&&(l?l=Math.max(l,u?n.width:0):h?h=Math.max(h,u?n.height:0):u&&(l=n.width,h=n.height,h*d>l?l=h*d:h=l/d));var f=pe({aspectRatio:d,width:l,height:h});l=f.width,h=f.height,o.minWidth=l,o.minHeight=h,o.maxWidth=1/0,o.maxHeight=1/0}if(a)if(r>(u?0:1)){var g=s.width-o.width,b=s.height-o.height;o.minLeft=Math.min(0,g),o.minTop=Math.min(0,b),o.maxLeft=Math.max(0,g),o.maxTop=Math.max(0,b),u&&this.limited&&(o.minLeft=Math.min(n.left,n.left+(n.width-o.width)),o.minTop=Math.min(n.top,n.top+(n.height-o.height)),o.maxLeft=n.left,o.maxTop=n.top,r===2&&(o.width>=s.width&&(o.minLeft=Math.min(0,g),o.maxLeft=Math.max(0,g)),o.height>=s.height&&(o.minTop=Math.min(0,b),o.maxTop=Math.max(0,b))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=s.width,o.maxTop=s.height},renderCanvas:function(t,a){var e=this.canvasData,s=this.imageData;if(a){var o=Xr({width:s.naturalWidth*Math.abs(s.scaleX||1),height:s.naturalHeight*Math.abs(s.scaleY||1),degree:s.rotate||0}),n=o.width,r=o.height,d=e.width*(n/e.naturalWidth),u=e.height*(r/e.naturalHeight);e.left-=(d-e.width)/2,e.top-=(u-e.height)/2,e.width=d,e.height=u,e.aspectRatio=n/r,e.naturalWidth=n,e.naturalHeight=r,this.limitCanvas(!0,!1)}(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,fe(this.canvas,N({width:e.width,height:e.height},Xe({translateX:e.left,translateY:e.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var a=this.canvasData,e=this.imageData,s=e.naturalWidth*(a.width/a.naturalWidth),o=e.naturalHeight*(a.height/a.naturalHeight);N(e,{width:s,height:o,left:(a.width-s)/2,top:(a.height-o)/2}),fe(this.image,N({width:e.width,height:e.height},Xe(N({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,a=this.canvasData,e=t.aspectRatio||t.initialAspectRatio,s=Number(t.autoCropArea)||.8,o={width:a.width,height:a.height};e&&(a.height*e>a.width?o.height=o.width/e:o.width=o.height*e),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*s),o.height=Math.max(o.minHeight,o.height*s),o.left=a.left+(a.width-o.width)/2,o.top=a.top+(a.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=N({},o)},limitCropBox:function(t,a){var e=this.options,s=this.containerData,o=this.canvasData,n=this.cropBoxData,r=this.limited,d=e.aspectRatio;if(t){var u=Number(e.minCropBoxWidth)||0,l=Number(e.minCropBoxHeight)||0,h=r?Math.min(s.width,o.width,o.width+o.left,s.width-o.left):s.width,f=r?Math.min(s.height,o.height,o.height+o.top,s.height-o.top):s.height;u=Math.min(u,s.width),l=Math.min(l,s.height),d&&(u&&l?l*d>u?l=u/d:u=l*d:u?l=u/d:l&&(u=l*d),f*d>h?f=h/d:h=f*d),n.minWidth=Math.min(u,h),n.minHeight=Math.min(l,f),n.maxWidth=h,n.maxHeight=f}a&&(r?(n.minLeft=Math.max(0,o.left),n.minTop=Math.max(0,o.top),n.maxLeft=Math.min(s.width,o.left+o.width)-n.width,n.maxTop=Math.min(s.height,o.top+o.height)-n.height):(n.minLeft=0,n.minTop=0,n.maxLeft=s.width-n.width,n.maxTop=s.height-n.height))},renderCropBox:function(){var t=this.options,a=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&je(this.face,Ve,e.width>=a.width&&e.height>=a.height?ri:At),fe(this.cropBox,N({width:e.width,height:e.height},Xe({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ne(this.element,vt,this.getData())}},el={initPreview:function(){var t=this.element,a=this.crossOrigin,e=this.options.preview,s=a?this.crossOriginUrl:this.url,o=t.alt||"The image to preview",n=document.createElement("img");if(a&&(n.crossOrigin=a),n.src=s,n.alt=o,this.viewBox.appendChild(n),this.viewBoxImage=n,!!e){var r=e;typeof e=="string"?r=t.ownerDocument.querySelectorAll(e):e.querySelector&&(r=[e]),this.previews=r,F(r,function(d){var u=document.createElement("img");je(d,it,{width:d.offsetWidth,height:d.offsetHeight,html:d.innerHTML}),a&&(u.crossOrigin=a),u.src=s,u.alt=o,u.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',d.innerHTML="",d.appendChild(u)})}},resetPreview:function(){F(this.previews,function(t){var a=Mt(t,it);fe(t,{width:a.width,height:a.height}),t.innerHTML=a.html,Ur(t,it)})},preview:function(){var t=this.imageData,a=this.canvasData,e=this.cropBoxData,s=e.width,o=e.height,n=t.width,r=t.height,d=e.left-a.left-t.left,u=e.top-a.top-t.top;!this.cropped||this.disabled||(fe(this.viewBoxImage,N({width:n,height:r},Xe(N({translateX:-d,translateY:-u},t)))),F(this.previews,function(l){var h=Mt(l,it),f=h.width,g=h.height,b=f,v=g,w=1;s&&(w=f/s,v=o*w),o&&v>g&&(w=g/o,b=s*w,v=g),fe(l,{width:b,height:v}),fe(l.getElementsByTagName("img")[0],N({width:n*w,height:r*w},Xe(N({translateX:-d*w,translateY:-u*w},t))))}))}},tl={bind:function(){var t=this.element,a=this.options,e=this.cropper;G(a.cropstart)&&te(t,yt,a.cropstart),G(a.cropmove)&&te(t,wt,a.cropmove),G(a.cropend)&&te(t,bt,a.cropend),G(a.crop)&&te(t,vt,a.crop),G(a.zoom)&&te(t,Dt,a.zoom),te(e,Fa,this.onCropStart=this.cropStart.bind(this)),a.zoomable&&a.zoomOnWheel&&te(e,Xa,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&te(e,Wa,this.onDblclick=this.dblclick.bind(this)),te(t.ownerDocument,Ua,this.onCropMove=this.cropMove.bind(this)),te(t.ownerDocument,za,this.onCropEnd=this.cropEnd.bind(this)),a.responsive&&te(window,Ya,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,a=this.options,e=this.cropper;G(a.cropstart)&&ie(t,yt,a.cropstart),G(a.cropmove)&&ie(t,wt,a.cropmove),G(a.cropend)&&ie(t,bt,a.cropend),G(a.crop)&&ie(t,vt,a.crop),G(a.zoom)&&ie(t,Dt,a.zoom),ie(e,Fa,this.onCropStart),a.zoomable&&a.zoomOnWheel&&ie(e,Xa,this.onWheel,{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&ie(e,Wa,this.onDblclick),ie(t.ownerDocument,Ua,this.onCropMove),ie(t.ownerDocument,za,this.onCropEnd),a.responsive&&ie(window,Ya,this.onResize)}},al={resize:function(){if(!this.disabled){var t=this.options,a=this.container,e=this.containerData,s=a.offsetWidth/e.width,o=a.offsetHeight/e.height,n=Math.abs(s-1)>Math.abs(o-1)?s:o;if(n!==1){var r,d;t.restore&&(r=this.getCanvasData(),d=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(F(r,function(u,l){r[l]=u*n})),this.setCropBoxData(F(d,function(u,l){d[l]=u*n})))}}},dblclick:function(){this.disabled||this.options.dragMode===di||this.setDragMode(Wr(this.dragBox,_t)?ci:$t)},wheel:function(t){var a=this,e=Number(this.options.wheelZoomRatio)||.1,s=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){a.wheeling=!1},50),t.deltaY?s=t.deltaY>0?1:-1:t.wheelDelta?s=-t.wheelDelta/120:t.detail&&(s=t.detail>0?1:-1),this.zoom(-s*e,t)))},cropStart:function(t){var a=t.buttons,e=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(E(a)&&a!==1||E(e)&&e!==0||t.ctrlKey))){var s=this.options,o=this.pointers,n;t.changedTouches?F(t.changedTouches,function(r){o[r.identifier]=ot(r)}):o[t.pointerId||0]=ot(t),Object.keys(o).length>1&&s.zoomable&&s.zoomOnTouch?n=li:n=Mt(t.target,Ve),!!Sr.test(n)&&Ne(this.element,yt,{originalEvent:t,action:n})!==!1&&(t.preventDefault(),this.action=n,this.cropping=!1,n===si&&(this.cropping=!0,z(this.dragBox,rt)))}},cropMove:function(t){var a=this.action;if(!(this.disabled||!a)){var e=this.pointers;t.preventDefault(),Ne(this.element,wt,{originalEvent:t,action:a})!==!1&&(t.changedTouches?F(t.changedTouches,function(s){N(e[s.identifier]||{},ot(s,!0))}):N(e[t.pointerId||0]||{},ot(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var a=this.action,e=this.pointers;t.changedTouches?F(t.changedTouches,function(s){delete e[s.identifier]}):delete e[t.pointerId||0],a&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,$e(this.dragBox,rt,this.cropped&&this.options.modal)),Ne(this.element,bt,{originalEvent:t,action:a}))}}},il={change:function(t){var a=this.options,e=this.canvasData,s=this.containerData,o=this.cropBoxData,n=this.pointers,r=this.action,d=a.aspectRatio,u=o.left,l=o.top,h=o.width,f=o.height,g=u+h,b=l+f,v=0,w=0,x=s.width,$=s.height,I=!0,A;!d&&t.shiftKey&&(d=h&&f?h/f:1),this.limited&&(v=o.minLeft,w=o.minTop,x=v+Math.min(s.width,e.width,e.left+e.width),$=w+Math.min(s.height,e.height,e.top+e.height));var S=n[Object.keys(n)[0]],p={x:S.endX-S.startX,y:S.endY-S.startY},T=function(X){switch(X){case ge:g+p.x>x&&(p.x=x-g);break;case ve:u+p.x<v&&(p.x=v-u);break;case ue:l+p.y<w&&(p.y=w-l);break;case Se:b+p.y>$&&(p.y=$-b);break}};switch(r){case At:u+=p.x,l+=p.y;break;case ge:if(p.x>=0&&(g>=x||d&&(l<=w||b>=$))){I=!1;break}T(ge),h+=p.x,h<0&&(r=ve,h=-h,u-=h),d&&(f=h/d,l+=(o.height-f)/2);break;case ue:if(p.y<=0&&(l<=w||d&&(u<=v||g>=x))){I=!1;break}T(ue),f-=p.y,l+=p.y,f<0&&(r=Se,f=-f,l-=f),d&&(h=f*d,u+=(o.width-h)/2);break;case ve:if(p.x<=0&&(u<=v||d&&(l<=w||b>=$))){I=!1;break}T(ve),h-=p.x,u+=p.x,h<0&&(r=ge,h=-h,u-=h),d&&(f=h/d,l+=(o.height-f)/2);break;case Se:if(p.y>=0&&(b>=$||d&&(u<=v||g>=x))){I=!1;break}T(Se),f+=p.y,f<0&&(r=ue,f=-f,l-=f),d&&(h=f*d,u+=(o.width-h)/2);break;case Ue:if(d){if(p.y<=0&&(l<=w||g>=x)){I=!1;break}T(ue),f-=p.y,l+=p.y,h=f*d}else T(ue),T(ge),p.x>=0?g<x?h+=p.x:p.y<=0&&l<=w&&(I=!1):h+=p.x,p.y<=0?l>w&&(f-=p.y,l+=p.y):(f-=p.y,l+=p.y);h<0&&f<0?(r=Ye,f=-f,h=-h,l-=f,u-=h):h<0?(r=ze,h=-h,u-=h):f<0&&(r=He,f=-f,l-=f);break;case ze:if(d){if(p.y<=0&&(l<=w||u<=v)){I=!1;break}T(ue),f-=p.y,l+=p.y,h=f*d,u+=o.width-h}else T(ue),T(ve),p.x<=0?u>v?(h-=p.x,u+=p.x):p.y<=0&&l<=w&&(I=!1):(h-=p.x,u+=p.x),p.y<=0?l>w&&(f-=p.y,l+=p.y):(f-=p.y,l+=p.y);h<0&&f<0?(r=He,f=-f,h=-h,l-=f,u-=h):h<0?(r=Ue,h=-h,u-=h):f<0&&(r=Ye,f=-f,l-=f);break;case Ye:if(d){if(p.x<=0&&(u<=v||b>=$)){I=!1;break}T(ve),h-=p.x,u+=p.x,f=h/d}else T(Se),T(ve),p.x<=0?u>v?(h-=p.x,u+=p.x):p.y>=0&&b>=$&&(I=!1):(h-=p.x,u+=p.x),p.y>=0?b<$&&(f+=p.y):f+=p.y;h<0&&f<0?(r=Ue,f=-f,h=-h,l-=f,u-=h):h<0?(r=He,h=-h,u-=h):f<0&&(r=ze,f=-f,l-=f);break;case He:if(d){if(p.x>=0&&(g>=x||b>=$)){I=!1;break}T(ge),h+=p.x,f=h/d}else T(Se),T(ge),p.x>=0?g<x?h+=p.x:p.y>=0&&b>=$&&(I=!1):h+=p.x,p.y>=0?b<$&&(f+=p.y):f+=p.y;h<0&&f<0?(r=ze,f=-f,h=-h,l-=f,u-=h):h<0?(r=Ye,h=-h,u-=h):f<0&&(r=Ue,f=-f,l-=f);break;case ri:this.move(p.x,p.y),I=!1;break;case li:this.zoom(Hr(n),t),I=!1;break;case si:if(!p.x||!p.y){I=!1;break}A=_i(this.cropper),u=S.startX-A.left,l=S.startY-A.top,h=o.minWidth,f=o.minHeight,p.x>0?r=p.y>0?He:Ue:p.x<0&&(u-=h,r=p.y>0?Ye:ze),p.y<0&&(l-=f),this.cropped||(le(this.cropBox,Q),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}I&&(o.width=h,o.height=f,o.left=u,o.top=l,this.action=r,this.renderCropBox()),F(n,function(P){P.startX=P.endX,P.startY=P.endY})}},ol={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&z(this.dragBox,rt),le(this.cropBox,Q),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=N({},this.initialImageData),this.canvasData=N({},this.initialCanvasData),this.cropBoxData=N({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(N(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),le(this.dragBox,rt),z(this.cropBox,Q)),this},replace:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),a?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,F(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,le(this.cropper,Pa)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,z(this.cropper,Pa)),this},destroy:function(){var t=this.element;return t[R]?(t[R]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,s=e.left,o=e.top;return this.moveTo(ht(t)?t:s+Number(t),ht(a)?a:o+Number(a))},moveTo:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,s=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.movable&&(E(t)&&(e.left=t,s=!0),E(a)&&(e.top=a,s=!0),s&&this.renderCanvas(!0)),this},zoom:function(t,a){var e=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(e.width*t/e.naturalWidth,null,a)},zoomTo:function(t,a,e){var s=this.options,o=this.canvasData,n=o.width,r=o.height,d=o.naturalWidth,u=o.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&s.zoomable){var l=d*t,h=u*t;if(Ne(this.element,Dt,{ratio:t,oldRatio:n/d,originalEvent:e})===!1)return this;if(e){var f=this.pointers,g=_i(this.cropper),b=f&&Object.keys(f).length?Yr(f):{pageX:e.pageX,pageY:e.pageY};o.left-=(l-n)*((b.pageX-g.left-o.left)/n),o.top-=(h-r)*((b.pageY-g.top-o.top)/r)}else Ae(a)&&E(a.x)&&E(a.y)?(o.left-=(l-n)*((a.x-o.left)/n),o.top-=(h-r)*((a.y-o.top)/r)):(o.left-=(l-n)/2,o.top-=(h-r)/2);o.width=l,o.height=h,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),E(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var a=this.imageData.scaleY;return this.scale(t,E(a)?a:1)},scaleY:function(t){var a=this.imageData.scaleX;return this.scale(E(a)?a:1,t)},scale:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.imageData,s=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.scalable&&(E(t)&&(e.scaleX=t,s=!0),E(a)&&(e.scaleY=a,s=!0),s&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=this.options,e=this.imageData,s=this.canvasData,o=this.cropBoxData,n;if(this.ready&&this.cropped){n={x:o.left-s.left,y:o.top-s.top,width:o.width,height:o.height};var r=e.width/e.naturalWidth;if(F(n,function(l,h){n[h]=l/r}),t){var d=Math.round(n.y+n.height),u=Math.round(n.x+n.width);n.x=Math.round(n.x),n.y=Math.round(n.y),n.width=u-n.x,n.height=d-n.y}}else n={x:0,y:0,width:0,height:0};return a.rotatable&&(n.rotate=e.rotate||0),a.scalable&&(n.scaleX=e.scaleX||1,n.scaleY=e.scaleY||1),n},setData:function(t){var a=this.options,e=this.imageData,s=this.canvasData,o={};if(this.ready&&!this.disabled&&Ae(t)){var n=!1;a.rotatable&&E(t.rotate)&&t.rotate!==e.rotate&&(e.rotate=t.rotate,n=!0),a.scalable&&(E(t.scaleX)&&t.scaleX!==e.scaleX&&(e.scaleX=t.scaleX,n=!0),E(t.scaleY)&&t.scaleY!==e.scaleY&&(e.scaleY=t.scaleY,n=!0)),n&&this.renderCanvas(!0,!0);var r=e.width/e.naturalWidth;E(t.x)&&(o.left=t.x*r+s.left),E(t.y)&&(o.top=t.y*r+s.top),E(t.width)&&(o.width=t.width*r),E(t.height)&&(o.height=t.height*r),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?N({},this.containerData):{}},getImageData:function(){return this.sized?N({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,a={};return this.ready&&F(["left","top","width","height","naturalWidth","naturalHeight"],function(e){a[e]=t[e]}),a},setCanvasData:function(t){var a=this.canvasData,e=a.aspectRatio;return this.ready&&!this.disabled&&Ae(t)&&(E(t.left)&&(a.left=t.left),E(t.top)&&(a.top=t.top),E(t.width)?(a.width=t.width,a.height=t.width/e):E(t.height)&&(a.height=t.height,a.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,a;return this.ready&&this.cropped&&(a={left:t.left,top:t.top,width:t.width,height:t.height}),a||{}},setCropBoxData:function(t){var a=this.cropBoxData,e=this.options.aspectRatio,s,o;return this.ready&&this.cropped&&!this.disabled&&Ae(t)&&(E(t.left)&&(a.left=t.left),E(t.top)&&(a.top=t.top),E(t.width)&&t.width!==a.width&&(s=!0,a.width=t.width),E(t.height)&&t.height!==a.height&&(o=!0,a.height=t.height),e&&(s?a.height=a.width/e:o&&(a.width=a.height*e)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var a=this.canvasData,e=Vr(this.image,this.imageData,a,t);if(!this.cropped)return e;var s=this.getData(),o=s.x,n=s.y,r=s.width,d=s.height,u=e.width/Math.floor(a.naturalWidth);u!==1&&(o*=u,n*=u,r*=u,d*=u);var l=r/d,h=pe({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),f=pe({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),g=pe({aspectRatio:l,width:t.width||(u!==1?e.width:r),height:t.height||(u!==1?e.height:d)}),b=g.width,v=g.height;b=Math.min(h.width,Math.max(f.width,b)),v=Math.min(h.height,Math.max(f.height,v));var w=document.createElement("canvas"),x=w.getContext("2d");w.width=Re(b),w.height=Re(v),x.fillStyle=t.fillColor||"transparent",x.fillRect(0,0,b,v);var $=t.imageSmoothingEnabled,I=$===void 0?!0:$,A=t.imageSmoothingQuality;x.imageSmoothingEnabled=I,A&&(x.imageSmoothingQuality=A);var S=e.width,p=e.height,T=o,P=n,X,J,V,de,ne,Z;T<=-r||T>S?(T=0,X=0,V=0,ne=0):T<=0?(V=-T,T=0,X=Math.min(S,r+T),ne=X):T<=S&&(V=0,X=Math.min(r,S-T),ne=X),X<=0||P<=-d||P>p?(P=0,J=0,de=0,Z=0):P<=0?(de=-P,P=0,J=Math.min(p,d+P),Z=J):P<=p&&(de=0,J=Math.min(d,p-P),Z=J);var H=[T,P,X,J];if(ne>0&&Z>0){var se=b/r;H.push(V*se,de*se,ne*se,Z*se)}return x.drawImage.apply(x,[e].concat(ni(H.map(function(ye){return Math.floor(Re(ye))})))),w},setAspectRatio:function(t){var a=this.options;return!this.disabled&&!ht(t)&&(a.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var a=this.options,e=this.dragBox,s=this.face;if(this.ready&&!this.disabled){var o=t===$t,n=a.movable&&t===ci;t=o||n?t:di,a.dragMode=t,je(e,Ve,t),$e(e,_t,o),$e(e,gt,n),a.cropBoxMovable||(je(s,Ve,t),$e(s,_t,o),$e(s,gt,n))}return this}},nl=ce.Cropper,vi=function(){function i(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(vr(this,i),!t||!Ir.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=N({},ja,Ae(a)&&a),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return br(i,[{key:"init",value:function(){var a=this.element,e=a.tagName.toLowerCase(),s;if(!a[R]){if(a[R]=this,e==="img"){if(this.isImg=!0,s=a.getAttribute("src")||"",this.originalUrl=s,!s)return;s=a.src}else e==="canvas"&&window.HTMLCanvasElement&&(s=a.toDataURL());this.load(s)}}},{key:"load",value:function(a){var e=this;if(!!a){this.url=a,this.imageData={};var s=this.element,o=this.options;if(!o.rotatable&&!o.scalable&&(o.checkOrientation=!1),!o.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Ar.test(a)){$r.test(a)?this.read(Gr(a)):this.clone();return}var n=new XMLHttpRequest,r=this.clone.bind(this);this.reloading=!0,this.xhr=n,n.onabort=r,n.onerror=r,n.ontimeout=r,n.onprogress=function(){n.getResponseHeader("content-type")!==Va&&n.abort()},n.onload=function(){e.read(n.response)},n.onloadend=function(){e.reloading=!1,e.xhr=null},o.checkCrossOrigin&&Ga(a)&&s.crossOrigin&&(a=Qa(a)),n.open("GET",a,!0),n.responseType="arraybuffer",n.withCredentials=s.crossOrigin==="use-credentials",n.send()}}},{key:"read",value:function(a){var e=this.options,s=this.imageData,o=Zr(a),n=0,r=1,d=1;if(o>1){this.url=Qr(a,Va);var u=Kr(o);n=u.rotate,r=u.scaleX,d=u.scaleY}e.rotatable&&(s.rotate=n),e.scalable&&(s.scaleX=r,s.scaleY=d),this.clone()}},{key:"clone",value:function(){var a=this.element,e=this.url,s=a.crossOrigin,o=e;this.options.checkCrossOrigin&&Ga(e)&&(s||(s="anonymous"),o=Qa(e)),this.crossOrigin=s,this.crossOriginUrl=o;var n=document.createElement("img");s&&(n.crossOrigin=s),n.src=o||e,n.alt=a.alt||"The image to crop",this.image=n,n.onload=this.start.bind(this),n.onerror=this.stop.bind(this),z(n,La),a.parentNode.insertBefore(n,a.nextSibling)}},{key:"start",value:function(){var a=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var s=ce.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(ce.navigator.userAgent),o=function(u,l){N(a.imageData,{naturalWidth:u,naturalHeight:l,aspectRatio:u/l}),a.initialImageData=N({},a.imageData),a.sizing=!1,a.sized=!0,a.build()};if(e.naturalWidth&&!s){o(e.naturalWidth,e.naturalHeight);return}var n=document.createElement("img"),r=document.body||document.documentElement;this.sizingImage=n,n.onload=function(){o(n.width,n.height),s||r.removeChild(n)},n.src=e.src,s||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(n))}},{key:"stop",value:function(){var a=this.image;a.onload=null,a.onerror=null,a.parentNode.removeChild(a),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var a=this.element,e=this.options,s=this.image,o=a.parentNode,n=document.createElement("div");n.innerHTML=Rr;var r=n.querySelector(".".concat(R,"-container")),d=r.querySelector(".".concat(R,"-canvas")),u=r.querySelector(".".concat(R,"-drag-box")),l=r.querySelector(".".concat(R,"-crop-box")),h=l.querySelector(".".concat(R,"-face"));this.container=o,this.cropper=r,this.canvas=d,this.dragBox=u,this.cropBox=l,this.viewBox=r.querySelector(".".concat(R,"-view-box")),this.face=h,d.appendChild(s),z(a,Q),o.insertBefore(r,a.nextSibling),le(s,La),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,z(l,Q),e.guides||z(l.getElementsByClassName("".concat(R,"-dashed")),Q),e.center||z(l.getElementsByClassName("".concat(R,"-center")),Q),e.background&&z(r,"".concat(R,"-bg")),e.highlight||z(h,Er),e.cropBoxMovable&&(z(h,gt),je(h,Ve,At)),e.cropBoxResizable||(z(l.getElementsByClassName("".concat(R,"-line")),Q),z(l.getElementsByClassName("".concat(R,"-point")),Q)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),G(e.ready)&&te(a,Ha,e.ready,{once:!0}),Ne(a,Ha)}}},{key:"unbuild",value:function(){if(!!this.ready){this.ready=!1,this.unbind(),this.resetPreview();var a=this.cropper.parentNode;a&&a.removeChild(this.cropper),le(this.element,Q)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=nl,i}},{key:"setDefaults",value:function(a){N(ja,Ae(a)&&a)}}]),i}();N(vi.prototype,Jr,el,tl,al,il,ol);const sl="/assets/save-icon.8e190e9f.svg",rl="/assets/add-picture.759fe9a1.svg",ll="/assets/rotate-picture.cb210f82.svg";const cl={name:"EditAvatarModal",components:{ModalWindow:Ze,InputComponent:Pe,Form:Qe,GreenBtn:ct},props:["userImage"],emits:["closeModal","getProfileData"],setup(i,{emit:t}){const a=k(null),e=k(""),s=k(null),o=k(null),n=k(null),r=new FileReader;let d=null;s.value=i.userImage;const u=U(()=>sl);function l(){s.value=null,o.value=null,t("closeModal","edit_avatar")}function h(){d.getCroppedCanvas().toBlob(v=>{n.value=v,e.value=URL.createObjectURL(v)},"image/jpeg")}function f(){d.rotate(-90)}function g(v){o.value=v.target.files[0]}function b(){const v=new FormData,w=new File([n.value],"my_avatar.jpg",{type:"image/jpg",lastModified:new Date().getTime()});v.append("avatar",w),oe.AuthorizationService.AddAvatar(v).then(()=>{t("closeModal","edit_avatar"),t("getProfileData")}).catch(x=>console.log(x))}return r.onload=v=>{s.value=v.target.result},Ka(()=>{o.value&&r.readAsDataURL(o.value)}),Si(s,()=>{s.value&&d.replace(s.value)}),ti(()=>{a.value.addEventListener("ready",function(){h()}),a.value.addEventListener("cropend",function(v){h()}),a.value.addEventListener("crop",function(v){h()}),d=new vi(a.value,{aspectRatio:1,minCropBoxWidth:50,minCropBoxHeight:50,viewMode:2,dragMode:"crop",rotatable:!0,background:!1,cropBoxMovable:!0,cropBoxResizable:!0})}),Ai(()=>{d.destroy()}),{closeModal:l,setAvatar:b,onFileSelected:g,rotateImage:f,iconSave:u,cropImg:a,cropedImage:e,userSrcImage:s}}},bi=i=>(qe("data-v-4454963d"),i=i(),Ge(),i),dl={class:"b-edit-avatar"},hl={class:"b-edit-avatar__main-part"},ul={class:"b-edit-avatar__right-side"},fl={class:"b-edit-avatar__crop-pic"},pl=["src"],ml={class:"b-edit-avatar__left-side"},_l={class:"b-edit-avatar__edited-pic"},gl=["src"],vl={class:"b-edit-avatar__main-functions"},bl={class:"b-edit-avatar__another-pic"},wl={for:"my_file"},yl=bi(()=>c("img",{src:rl,alt:""},null,-1)),Dl={class:"b-edit-avatar__desk-text"},Ml={class:"b-edit-avatar__mob-text"},Cl={class:"b-edit-avatar__left-mob-part"},El=bi(()=>c("img",{src:ll,alt:""},null,-1)),kl={class:"b-edit-avatar__btns-block"};function xl(i,t,a,e,s,o){const n=M("GreenBtn"),r=M("ModalWindow");return _(),L(we,null,{default:B(()=>[C(r,{"is-title-shown":!1,onCloseModal:e.closeModal},{"edit-avatar":B(()=>[c("div",dl,[c("div",hl,[c("div",ul,[c("div",fl,[c("img",{src:e.userSrcImage,ref:"cropImg",alt:""},null,8,pl)])]),c("div",ml,[c("div",_l,[c("img",{src:e.cropedImage,alt:""},null,8,gl)]),c("div",vl,[c("div",bl,[c("label",wl,[c("input",{type:"file",id:"my_file",style:{display:"none"},onChange:t[0]||(t[0]=(...d)=>e.onFileSelected&&e.onFileSelected(...d))},null,32),yl,c("span",Dl,m(i.$t("modals.edit_avatar.another-pic")),1),c("span",Ml,m(i.$t("modals.edit_avatar.chose-another-pic")),1)])]),c("div",Cl,[c("div",{class:"b-edit-avatar__rotate",onClick:t[1]||(t[1]=(...d)=>e.rotateImage&&e.rotateImage(...d))},[El,c("span",null,m(i.$t("modals.edit_avatar.rotate")),1)])])])])]),c("div",kl,[c("div",{class:"b-edit-avatar__cancel-btn",onClick:t[2]||(t[2]=(...d)=>e.closeModal&&e.closeModal(...d))},m(i.$t("buttons.decline")),1),C(n,{icon:e.iconSave,width:125,text:i.$t("buttons.save"),onClickFunction:e.setAvatar},null,8,["icon","text","onClickFunction"])])])]),_:1},8,["onCloseModal"])]),_:1})}const Tl=j(cl,[["render",xl],["__scopeId","data-v-4454963d"]]),Sl="/assets/arrow-left-small.5f4f9f82.svg",Al="/assets/cross-white.2e3360d0.svg";const ft={SAVE:"save",CANCEL:"cancel"},$l={name:"UserCabinet",components:{GreenBtn:ct,WhiteBtn:Et,InputComponent:Pe,ModalWindow:Ze,ModalUserWindow:Vi,PlayerPageComponent:Li,RatingCard:vo,UserDetailsCard:On,SecurityBlock:Jn,DeleteAccountModal:ks,ChangePasswordModal:Ls,ChangeUserDataModal:Qs,Form:Qe,Loading:$i,ChangeEmailModal:rr,ButtonsBlock:gr,TabLabel:rs,EditAvatarModal:Tl},setup(i){var Le,We,Fe,Je,et,Rt,Nt,Ot,Bt,Pt,Lt,Wt,Ft,Ut,zt,Ht,Yt,Xt,Vt,jt,qt,Gt,Qt,Zt,Kt,Jt,ea,ta,aa,ia,oa,na,sa,ra,la,ca,da,ha,ua,fa,pa,ma,_a,ga,va,ba,wa,ya,Da,Ma,Ca,Ea;const{t}=Ct(),a=Ii(),e=ei(),{isMobile:s,onResize:o}=zi(),n=k(null),r=k(null),d=k(""),u=k(""),l=k(null),h=k(!1),f=k(null),g=k(null),b=k(!1),v=k(!1),w=k(""),x=k(),$=U(()=>({user_info:Y.users_page.userInfo,tabs:Y.profile.tabs.map(D=>({...D,name:t(D.name)})),monthFromNumber:Y.users_page.months.monthFromNumber,numberFromMonth:Y.users_page.months.numberFromMonth}));x.value=(Le=a.meta.usersData)==null?void 0:Le.data;const I=k({last_name:(Fe=(We=a.meta.usersData)==null?void 0:We.data.profile)==null?void 0:Fe.last_name,name:(et=(Je=a.meta.usersData)==null?void 0:Je.data.profile)==null?void 0:et.name,about_me:(Nt=(Rt=a.meta.usersData)==null?void 0:Rt.data.profile)==null?void 0:Nt.about_me,day:P((Bt=(Ot=a.meta.usersData)==null?void 0:Ot.data.profile)==null?void 0:Bt.birthday),month:X((Lt=(Pt=a.meta.usersData)==null?void 0:Pt.data.profile)==null?void 0:Lt.birthday),year:J((Ft=(Wt=a.meta.usersData)==null?void 0:Wt.data.profile)==null?void 0:Ft.birthday),height:(zt=(Ut=a.meta.usersData)==null?void 0:Ut.data.profile)==null?void 0:zt.height,weight:(Yt=(Ht=a.meta.usersData)==null?void 0:Ht.data.profile)==null?void 0:Yt.weight,working_leg:V((Vt=(Xt=a.meta.usersData)==null?void 0:Xt.data.profile)==null?void 0:Vt.working_leg),position:(qt=(jt=a.meta.usersData)==null?void 0:jt.data.profile)==null?void 0:qt.position,phone:(Qt=(Gt=a.meta.usersData)==null?void 0:Gt.data)==null?void 0:Qt.phone,config_phone:(Kt=(Zt=a.meta.usersData)==null?void 0:Zt.data.configuration)==null?void 0:Kt.phone,config_email:(ea=(Jt=a.meta.usersData)==null?void 0:Jt.data.configuration)==null?void 0:ea.email,show_reviews:(aa=(ta=a.meta.usersData)==null?void 0:ta.data.configuration)==null?void 0:aa.show_reviews}),A=Ia({}),S=Ia({phone:!1,email:!1,delete_acc:!1,change_password:!1,public_profile:!1,change_data:!1,edit_avatar:!1}),p=U(()=>lt({last_name:W().required(),name:W().required(),about_me:W().required(),day:W().required(),month:W().required(),year:W().required(),height:W().required(),weight:W().required(),working_leg:W().required(),position:W().required(),phone:W().required(),config_phone:W().required(),config_email:W().required(),show_reviews:W().required()}));n.value={...(ia=a.meta.usersData)==null?void 0:ia.data,profile:{...(na=(oa=a.meta.usersData)==null?void 0:oa.data)==null?void 0:na.profile,working_leg:V((ra=(sa=a.meta.usersData)==null?void 0:sa.data.profile)==null?void 0:ra.working_leg)}},r.value=(ca=(la=a.meta.usersData)==null?void 0:la.data)==null?void 0:ca.raiting,d.value=(ha=(da=a.meta.usersData)==null?void 0:da.data)==null?void 0:ha.phone,u.value=(fa=(ua=a.meta.usersData)==null?void 0:ua.data)==null?void 0:fa.email,l.value={...(ma=(pa=a.meta.usersData)==null?void 0:pa.data)==null?void 0:ma.profile,working_leg:V((ga=(_a=a.meta.usersData)==null?void 0:_a.data.profile)==null?void 0:ga.working_leg),role:(ba=(va=a.meta.usersData)==null?void 0:va.data)==null?void 0:ba.role},A.value={checkboxPhone:(ya=(wa=a.meta.usersData)==null?void 0:wa.data.configuration)==null?void 0:ya.phone,checkboxEmail:(Ma=(Da=a.meta.usersData)==null?void 0:Da.data.configuration)==null?void 0:Ma.email,checkboxReviews:(Ea=(Ca=a.meta.usersData)==null?void 0:Ca.data.configuration)==null?void 0:Ea.show_reviews},ti(()=>{window.addEventListener("resize",o)}),Ja(()=>{window.removeEventListener("resize",o)});function T(D){D&&(v.value=!v.value)}function P(D){return D==null?void 0:D.split("-")[2]}function X(D){return $.value.monthFromNumber[D==null?void 0:D.split("-")[1]]}function J(D){return D==null?void 0:D.split("-")[0]}function V(D){switch(D){case"Left":return"\u041B\u0456\u0432\u0430";case"Right":return"\u041F\u0440\u0430\u0432\u0430";case"\u041B\u0456\u0432\u0430":return"Left";case"\u041F\u0440\u0430\u0432\u0430":return"Right"}}function de(){he("change_data"),f.value={title:"\u041F\u043E\u0434\u0438\u0432\u0438\u0442\u0438\u0441\u044C \u0437\u0456 \u0441\u0442\u043E\u0440\u043E\u043D\u0438",button_1:"\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u0434\u043E \u0434\u0435\u043C\u043E\u043D\u0441\u0442\u0440\u0430\u0446\u0456\u0457",button_2:"\u041F\u0440\u043E\u0441\u0442\u043E \u0437\u0431\u0435\u0440\u0435\u0433\u0442\u0438",btn_action:ft.SAVE,btn_with_1:189,btn_with_2:132}}function ne(){he("change_data"),f.value={title:"\u0412\u0438\u0439\u0442\u0438 \u0431\u0435\u0437 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043D\u043D\u044F \u0437\u043C\u0456\u043D?",button_1:"\u041D\u0456, \u043D\u0435 \u0432\u0438\u0445\u043E\u0434\u0438\u0442\u0438",button_2:"\u0422\u0430\u043A, \u0432\u0438\u0439\u0442\u0438",btn_action:ft.CANCEL,btn_with_1:124,btn_with_2:90}}function Z(){h.value=!h.value}function H(D){var ee,re;if(D===ft.SAVE){const q={...g.value.getControledValues()},{day:De,month:Me,year:Ce,working_leg:Ee,config_email:ke,config_phone:xe,show_reviews:Te,phone:K}=q,ae={...q,birthday:`${Ce}-${$.value.numberFromMonth[Me]}-${De}`,gender:(re=(ee=a.meta.usersData)==null?void 0:ee.data.profile)==null?void 0:re.gender,working_leg:V(Ee)};delete ae.day,delete ae.month,delete ae.year,delete ae.phone,delete ae.config_email,delete ae.config_phone,delete ae.show_reviews;const tt={configuration:{email:ke,phone:xe,show_reviews:Te},profile:{place:{place_name:"string",lat:90,lon:180},...ae},get_planned_events:"1y",phone:K};oe.UserService.updateProfileData(tt).then(()=>{_e(),se()}).catch(at=>console.log("mistake happened",at))}else _e()}function se(){b.value=!0,oe.UserService.getMyProfile().then(D=>{var ee,re,q,De,Me,Ce,Ee,ke,xe,Te,K,ae,tt,at,ka,xa,Ta,Sa;I.value={last_name:(ee=D.data.profile)==null?void 0:ee.last_name,name:(re=D.data.profile)==null?void 0:re.name,about_me:(q=D.data.profile)==null?void 0:q.about_me,day:P((De=D.data.profile)==null?void 0:De.birthday),month:X((Me=D.data.profile)==null?void 0:Me.birthday),year:J((Ce=D.data.profile)==null?void 0:Ce.birthday),height:(Ee=D.data.profile)==null?void 0:Ee.height,weight:(ke=D.data.profile)==null?void 0:ke.weight,working_leg:V((xe=D.data.profile)==null?void 0:xe.working_leg),position:(Te=D.data.profile)==null?void 0:Te.position,phone:(K=D.data)==null?void 0:K.phone,config_phone:(ae=D.data.configuration)==null?void 0:ae.phone,config_email:(tt=D.data.configuration)==null?void 0:tt.email,show_reviews:(at=D.data.configuration)==null?void 0:at.show_reviews},n.value=D.data,l.value={...(ka=D.data)==null?void 0:ka.profile,working_leg:V((xa=D.data.profile)==null?void 0:xa.working_leg)},x.value=D.data,u.value=(Ta=D.data)==null?void 0:Ta.email,d.value=(Sa=D.data)==null?void 0:Sa.phone,b.value=!1})}function ye(D,ee,re){re||($.tabs=$.tabs.map(q=>({...q,isActive:!1})).map(q=>q.id===D?{...q,isActive:!0}:q),e.push(ee))}function _e(){he("change_data"),Z()}function he(D){var ee,re;switch(D){case"edit_avatar":S.edit_avatar=!S.edit_avatar;break;case"email":S.email=!S.email;break;case"delete_acc":S.delete_acc=!S.delete_acc;break;case"public_profile":const q={...g.value.getControledValues()},{day:De,month:Me,year:Ce,working_leg:Ee,config_email:ke,config_phone:xe,show_reviews:Te}=q,K={...q,birthday:`${Ce}-${$.value.numberFromMonth[Me]}-${De}`,gender:(re=(ee=a.meta.usersData)==null?void 0:ee.data.profile)==null?void 0:re.gender,working_leg:V(Ee)};delete K.day,delete K.month,delete K.year,delete K.phone,delete K.config_email,delete K.config_phone,delete K.show_reviews,x.value={...x.value,configuration:{email:ke,phone:xe,show_reviews:Te},profile:{place:{place_name:"string",lat:90,lon:180},...K},get_planned_events:"1y"},S.public_profile=!S.public_profile;break;case"change_data":S.change_data=!S.change_data;break;case"change_password":S.change_password=!S.change_password;break}}function Ke(D,ee){w.value=ee,he(D)}return{toggleEditMode:Z,saveDeclineUserDataChanges:H,changeTab:ye,closeChangeUserDataModal:_e,toggleModal:he,saveDataEdit:de,cancelDataEdit:ne,openEditPictureModal:Ke,getMyProfile:se,userRating:r,userPhone:d,userEmail:u,isEditModeProfile:h,changeDataModalConfig:f,mockData:$,isModalActive:S,checkboxData:A,userData:l,schema:p,formValues:I,myForm:g,userInfo:n,isLoading:b,isMobile:s,isTabLabel:v,switchTabLabel:T,restData:x,userAvatar:w}}},wi=i=>(qe("data-v-790a874b"),i=i(),Ge(),i),Il={class:"b-user-cabinet"},Rl={class:"b-player-page__outer-btns"},Nl=wi(()=>c("img",{src:Sl,alt:""},null,-1)),Ol=wi(()=>c("img",{src:Al,alt:""},null,-1)),Bl={class:"b-user-cabinet__title-block"},Pl={class:"b-user-cabinet__titles"},Ll={class:"b-user-cabinet__title"},Wl={class:"b-user-cabinet__subtitle"},Fl={class:"b-user-cabinet__tab-block"},Ul=["onClick","onMouseenter","onMouseleave"],zl=["src","alt"],Hl={class:"b-user-cabinet__my-profile-tab"};function Yl(i,t,a,e,s,o){const n=M("Loading"),r=M("EditAvatarModal"),d=M("ChangeEmailModal"),u=M("DeleteAccountModal"),l=M("ChangePasswordModal"),h=M("PlayerPageComponent"),f=M("ModalUserWindow"),g=M("ChangeUserDataModal"),b=M("ButtonsBlock"),v=M("TabLabel"),w=M("RatingCard"),x=M("UserDetailsCard"),$=M("SecurityBlock"),I=M("Form");return _(),y("div",Il,[C(n,{"is-loading":e.isLoading},null,8,["is-loading"]),e.isModalActive.edit_avatar?(_(),L(r,{key:0,"user-image":e.userAvatar,onCloseModal:e.toggleModal,onGetProfileData:e.getMyProfile},null,8,["user-image","onCloseModal","onGetProfileData"])):O("",!0),e.isModalActive.email?(_(),L(d,{key:1,"user-email":e.userEmail,onCloseModal:e.toggleModal,onEmail:e.getMyProfile},null,8,["user-email","onCloseModal","onEmail"])):O("",!0),e.isModalActive.delete_acc?(_(),L(u,{key:2,"user-email":e.userEmail,onCloseModal:e.toggleModal},null,8,["user-email","onCloseModal"])):O("",!0),e.isModalActive.change_password?(_(),L(l,{key:3,"user-email":e.userEmail,onCloseModal:e.toggleModal},null,8,["user-email","onCloseModal"])):O("",!0),e.isModalActive.public_profile?(_(),L(f,{key:4},{"top-buttons":B(()=>[c("div",Rl,[c("div",{class:"b-player-page__continue",onClick:t[0]||(t[0]=A=>e.toggleModal("public_profile"))},[c("span",null,m(i.$t("buttons.keep-editing")),1),Nl]),c("div",{onClick:t[1]||(t[1]=A=>e.toggleModal("public_profile")),class:"b-player-page__exit"},[c("span",null,m(i.$t("buttons.save-and-out")),1),Ol])])]),"user-content":B(()=>[C(h,{"page-mode":"","user-data":e.restData},null,8,["user-data"])]),_:1})):O("",!0),e.isModalActive.change_data?(_(),L(g,{key:5,config:e.changeDataModalConfig,onCloseModal:e.closeChangeUserDataModal,onSaveDeclineChanges:e.saveDeclineUserDataChanges},null,8,["config","onCloseModal","onSaveDeclineChanges"])):O("",!0),c("div",Bl,[c("div",Pl,[c("div",Ll,m(i.$t("profile.title")),1),c("div",Wl,m(i.$t("profile.change-personal-data")),1)]),e.isMobile?O("",!0):(_(),L(b,{key:0,"cancel-btn-width":"auto","save-btn-width":"auto","is-edit-mode-profile":e.isEditModeProfile,onCancelDataEdit:e.cancelDataEdit,onSaveDataEdit:e.saveDataEdit,onToggleModal:e.toggleModal,onToggleEditMode:e.toggleEditMode},null,8,["is-edit-mode-profile","onCancelDataEdit","onSaveDataEdit","onToggleModal","onToggleEditMode"]))]),c("div",Fl,[(_(!0),y(Oe,null,Be(e.mockData.tabs,A=>(_(),y("div",{key:A.id,class:Ri(["b-user-cabinet__tab-element",{active:A.isActive,disabled:A.isDisabled}]),onClick:S=>e.changeTab(A.id,A.url,A.isDisabled),onMouseenter:S=>e.switchTabLabel(A.isDisabled),onMouseleave:S=>e.switchTabLabel(A.isDisabled)},[c("img",{src:A.img,alt:A.name},null,8,zl),me(" "+m(A.name)+" ",1),A.isDisabled&&e.isTabLabel?(_(),L(v,{key:0,title:i.$t("profile.coming-soon-title"),text:i.$t("profile.coming-soon-text")},null,8,["title","text"])):O("",!0)],42,Ul))),128))]),c("div",Hl,[C(I,{"validation-schema":e.schema,"initial-values":e.formValues,ref:"myForm"},{default:B(A=>[C(w,{"rating-scale":e.userRating},null,8,["rating-scale"]),C(x,{"user-data":e.userData,phone:e.userPhone,"is-edit-mode":e.isEditModeProfile,onOpenEditPictureModal:e.openEditPictureModal},null,8,["user-data","phone","is-edit-mode","onOpenEditPictureModal"]),C($,{onToggleModal:e.toggleModal,"user-email":e.userEmail,"checkbox-data":e.checkboxData,"is-edit-mode":e.isEditModeProfile},null,8,["onToggleModal","user-email","checkbox-data","is-edit-mode"]),e.isMobile?(_(),L(b,{key:0,"is-edit-mode-profile":e.isEditModeProfile,"edit-btn-width":"auto","cancel-btn-width":"auto","save-btn-width":"auto",onCancelDataEdit:e.cancelDataEdit,onSaveDataEdit:e.saveDataEdit,onToggleModal:e.toggleModal,onToggleEditMode:e.toggleEditMode},null,8,["is-edit-mode-profile","onCancelDataEdit","onSaveDataEdit","onToggleModal","onToggleEditMode"])):O("",!0)]),_:1},8,["validation-schema","initial-values"])])])}const lc=j($l,[["render",Yl],["__scopeId","data-v-790a874b"]]);export{lc as default};
