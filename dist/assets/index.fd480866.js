import{_ as H,d,bX as W,u as q,b as X,e as D,r as l,o as b,c as Y,f as n,t as m,a as c,w,R as y,j as P,h as J,C as _,ak as B,A as K}from"./index.a87692b6.js";import{d as N}from"./uk.cb0e459b.js";import{G as Q}from"./GreenBtn.8a2bdb09.js";import{I as Z}from"./InputComponent.8565bb3f.js";import{C as $,E as ee,S as te,a as ae,M as ne,b as oe,c as se,u as ie}from"./EventsFilters.0cbb5d47.js";import{R as re}from"./RightSidebar.7cb4dc35.js";import{E as le,I as de,S as ce,P as pe}from"./index.ec420b96.js";import{D as ve}from"./Dropdown.a6b9a975.js";import{a as me}from"./RadioGenderBox.28506c1d.js";import{v as _e}from"./v4.5d18198f.js";import"./hands-shake.318451ae.js";import"./search.0f589d58.js";import"./sort-arrows.1267e663.js";import"./set-filter.0a712c14.js";import"./cross.90e335cf.js";import"./calendar.1801e959.js";import"./arrow-right.a7e531f5.js";import"./location-point.2a3329f4.js";import"./tick-white.e3a033e2.js";import"./widthScreen.9cd91fc0.js";import"./ModalWindow.546b9b63.js";import"./PositionMap.8984c795.js";import"./SimpleListWrapper.9cc3d52f.js";import"./Checkbox.093b1817.js";import"./object.0e8161d1.js";const ge={name:"EventsPage",components:{GreenBtn:Q,Dropdown:ve,EmptyList:le,InputComponent:Z,ContextMenu:$,EventCard:ee,SmallLoader:te,SearchBlockEvents:ae,MyEventCard:ne,RightSidebar:re,SmartGridList:oe,InfiniteLoading:de,ScrollToTop:ce,EventsFilters:se},setup(){const o=ie(),s=d(null),x=W(),e=q(),C=d([]),{t:p}=X(),g=d(!1),i=d(),u=D(()=>({event_cards:_.event_page.event_cards,sport_type_dropdown:_.event_page.sport_type_dropdown,gender_dropdown:_.event_page.gender_dropdown,cities_dropdown:_.event_page.cities_dropdown})),f=D(()=>({title:"\u041D\u0435\u043C\u0430\u0454 \u043F\u043E\u0432\u0456\u0434\u043E\u043C\u043B\u0435\u043D\u044C \u0434\u043B\u044F \u0432\u0456\u0434\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u043D\u044F",description:"\u0412\u0430\u043C \u0449\u0435 \u043D\u0435 \u043D\u0430\u0434\u0445\u043E\u0434\u0438\u043B\u0438 \u0441\u043F\u043E\u0432\u0456\u0449\u0435\u043D\u043D\u044F \u0432\u0456\u0434 \u0456\u043D\u0448\u0438\u0445 \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456\u0432"}));function h(t){return B(t).locale(N).format("D MMMM")}function E(t){return B(t).locale(N).format("HH:mm")}function v(t){return{...t,date:h(t.date_and_time),time:E(t.date_and_time),labels:[t.type,t.gender==="Man"?p("events.men"):p("events.women"),t.need_form?p("events.need-uniform"):p("events.do-not-need-uniform")]}}function S(t){e.push(y.APPLICATION.EVENTS.GET_ONE.absolute(t))}function a(){e.push(y.APPLICATION.EVENTS.CREATE.absolute)}function I(){e.push(y.APPLICATION.MY_EVENTS.absolute)}const k=d(),R=d(!1),L=d(!1),A=()=>{L.value=_e()},{paginationElements:F,paginationPage:T,paginationTotalCount:ke,paginationLoad:M,paginationClearData:G}=pe({paginationDataRequest:t=>K.EventService.getAllEvents({...V(),page:t}),dataTransformation:v});T.value=1,F.value=x.meta.eventData.data.results.map(v);const{getRawFilters:V,updateFilter:Le,filters:U,clearFilters:O,setFilters:z}=me({router:e,filters:{duration:{type:Number,value:null},dist:{type:String,value:null},point:{type:String,value:null},type:{type:String},date_and_time_after:{type:String,value:o,default:o},date_and_time_before:{type:String,value:o,default:o},ordering:{type:String,value:""},place:{type:String,value:""},status:{type:String,value:""},gender:{type:String,value:""},search:{type:String,value:""},need_ball:{type:Boolean,value:!1}},afterUpdateFiltersCallBack:()=>{A(),G()}});return{emptyListMessages:f,scrollComponent:s,eventCards:C,isLoaderActive:g,switchToMyEvents:I,mainEventsBlock:i,mockData:u,filters:U,goToEventPage:S,goToCreateEvent:a,refList:k,blockScrollToTopIfExist:R,triggerForRestart:L,paginationElements:F,paginationPage:T,paginationLoad:M,loadDataPaginationData:(t,r)=>{M({pageNumber:t,$state:r,forceUpdate:T.value===1})},detectSizesForCards:({itemWidth:t,itemCount:r,itemHeight:j,itemMinHeight:De})=>{j.value=300,window.matchMedia("(min-width: 1400px)").matches?(t.value=i.value.clientWidth/3,r.value=3):window.matchMedia("(min-width: 1200px) and (max-width: 1400px)").matches||window.matchMedia("(min-width: 992px) and (max-width: 1199px)").matches||window.matchMedia("(min-width: 768px) and (max-width: 991px)").matches?(t.value=i.value.clientWidth/2,r.value=2):(window.matchMedia("(min-width: 576px) and (max-width: 768px)").matches||window.matchMedia("(max-width: 576px)").matches)&&(t.value=i.value.clientWidth,r.value=1)},setFilters:z,clearFilters:O,scrollToFirstElement:()=>{k.value.scrollToFirstElement()}}}},ue={class:"b-events-page"},fe={class:"b-events-page__main-body",ref:"mainEventsBlock"},he={class:"b-events-page__header-block"},Ee={class:"b-events-page__left-part"},Se={class:"b-events-page__title"},Te={class:"b-events-page__subtitle"},be={class:"b-events-page__event-switcher"},we={class:"b-events-page__general-events"},ye={class:"b-events-page__right-part"},xe={class:"b-events-page__main-search-block"},Ce={class:"b-events-page__all-events-block"};function Ie(o,s,x,e,C,p){const g=l("GreenBtn"),i=l("events-filters"),u=l("EventCard"),f=l("EmptyList"),h=l("ScrollToTop"),E=l("InfiniteLoading"),v=l("SmartGridList"),S=l("RightSidebar");return b(),Y("div",ue,[n("div",fe,[n("div",he,[n("div",Ee,[n("div",Se,m(o.$t("events.future-events")),1),n("div",Te,m(o.$t("events.renew-your-data")),1),n("div",be,[n("div",we,m(o.$t("events.general-events")),1),n("div",{class:"b-events-page__my-events",onClick:s[0]||(s[0]=(...a)=>e.switchToMyEvents&&e.switchToMyEvents(...a))},m(o.$t("events.my-events")),1)])]),n("div",ye,[c(g,{text:o.$t("buttons.create-event"),width:168,icon:"../../../assets/img/plus.svg",height:40,onClickFunction:e.goToCreateEvent},null,8,["text","icon","onClickFunction"])])]),n("div",xe,[c(i,{modelValue:e.filters,"onUpdate:value":e.setFilters,onClearFilters:e.clearFilters},null,8,["modelValue","onUpdate:value","onClearFilters"]),n("div",Ce,[c(v,{list:e.paginationElements,ref:"refList",detectSizesForCards:e.detectSizesForCards,"scrollbar-existing":e.blockScrollToTopIfExist,"onUpdate:scrollbar-existing":s[3]||(s[3]=a=>e.blockScrollToTopIfExist=a)},{smartGridListItem:w(a=>[(b(),P(u,{key:a.index,card:a.smartListItem,onGoToEventPage:I=>e.goToEventPage(a.smartListItem.id)},null,8,["card","onGoToEventPage"]))]),after:w(()=>[c(E,{identifier:e.triggerForRestart,ref:"scrollbar",onInfinite:s[2]||(s[2]=a=>e.loadDataPaginationData(e.paginationPage+1,a))},{complete:w(()=>[e.paginationElements.length?J("",!0):(b(),P(f,{key:0,title:e.emptyListMessages.title,description:e.emptyListMessages.title},null,8,["title","description"])),c(h,{"element-length":e.paginationElements,"is-scroll-top-exist":e.blockScrollToTopIfExist,onScrollButtonClicked:s[1]||(s[1]=a=>e.scrollToFirstElement())},null,8,["element-length","is-scroll-top-exist"])]),_:1},8,["identifier"])]),_:1},8,["list","detectSizesForCards","scrollbar-existing"])])])],512),c(S)])}const ot=H(ge,[["render",Ie],["__scopeId","data-v-c334a711"]]);export{ot as default};
